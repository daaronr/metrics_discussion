<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>21 Getting, cleaning and using data | Statistics, econometrics, experiment and survey methods, data science: Notes</title>
  <meta name="description" content="21 Getting, cleaning and using data | Statistics, econometrics, experiment and survey methods, data science: Notes" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="21 Getting, cleaning and using data | Statistics, econometrics, experiment and survey methods, data science: Notes" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="daaronr/metrics_discussion_work" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="21 Getting, cleaning and using data | Statistics, econometrics, experiment and survey methods, data science: Notes" />
  
  
  

<meta name="author" content="Dr. David Reinstein; contributions from Gerhard Riener, Scott Dickinson, Oska Fentem, and others" />


<meta name="date" content="2021-08-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="paleo-example.html"/>
<link rel="next" href="references.html"/>
<style type="text/css">
p.abstract{
  text-align: center;
  font-weight: bold;
}
div.abstract{
  margin: auto;
  width: 90%;
}
</style>
<script src="libs/header-attrs-2.8.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<!-- font families -->

<link href="https://fonts.googleapis.com/css?family=PT+Sans|Pacifico|Source+Sans+Pro" rel="stylesheet">

<!-- <script src="js/hideOutput.js"></script> -->

<!-- Mathjax -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/default.js"></script>

 <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["tex2jax.js", "TeX/AMSmath.js"],
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
        jax: ["input/TeX","output/CommonHTML"]
      });
      MathJax.Hub.processSectionDelay = 0;
  </script>




<script async defer src="https://hypothes.is/embed.js"></script>

<!-- Folding text box javascript thing -->

<script type="text/javascript">
$(document).ready(function() {
  $folds = $(".fold");
  $folds.wrapInner("<div class=\"fold-blck\">"); // wrap a div container around content
  $folds.prepend("<button class=\"fold-btn\">Unfold</button>");  // add a button
  $(".fold-blck").toggle();  // fold all blocks
  $(".fold-btn").on("click", function() {  // add onClick event
    $(this).text($(this).text() === "Fold" ? "Unfold" : "Fold");  // if the text equals "Fold", change it to "Unfold"or else to "Fold"
    $(this).next(".fold-blck").toggle("linear");  // "swing" is the default easing function. This can be further customized in its speed or the overall animation itself.
  })
});
</script>

<!--
<script type="text/javascript">

// toggle visibility of R source blocks in R Markdown output
function toggle_R() {
  var x = document.getElementsByClassName('r');
  if (x.length == 0) return;
  function toggle_vis(o) {
    var d = o.style.display;
    o.style.display = (d == 'block' || d == '') ? 'none':'block';
  }

  for (i = 0; i < x.length; i++) {
    var y = x[i];
    if (y.tagName.toLowerCase() === 'pre') toggle_vis(y);
  }

    var elem = document.getElementById("myButton1");
    if (elem.value === "Hide Global") elem.value = "Show Global";
    else elem.value = "Hide Global";
}

document.write('<input onclick="toggle_R();" type="button" value="Hide Global" id="myButton1" style="position: absolute; top: 10%; right: 2%; z-index: 200"></input>')

</script> -->

<!-- Global site tag (gtag.js) - Google Analytics
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-148137970-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-148137970-3');
</script>
-->

<!-- FOLDING TEXT BOXES -->

<script>
/* ========================================================================
 * Bootstrap: transition.js v3.3.7
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
  // ============================================================

  function transitionEnd() {
    var el = document.createElement('bootstrap')

    var transEndEventNames = {
      WebkitTransition : 'webkitTransitionEnd',
      MozTransition    : 'transitionend',
      OTransition      : 'oTransitionEnd otransitionend',
      transition       : 'transitionend'
    }

    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return { end: transEndEventNames[name] }
      }
    }

    return false // explicit for ie8 (  ._.)
  }

  // http://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false
    var $el = this
    $(this).one('bsTransitionEnd', function () { called = true })
    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
    setTimeout(callback, duration)
    return this
  }

  $(function () {
    $.support.transition = transitionEnd()

    if (!$.support.transition) return

    $.event.special.bsTransitionEnd = {
      bindType: $.support.transition.end,
      delegateType: $.support.transition.end,
      handle: function (e) {
        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
      }
    }
  })

}(jQuery);
</script>
<script>
/* ========================================================================
 * Bootstrap: collapse.js v3.3.7
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* jshint latedef: false */

+function ($) {
  'use strict';

  // COLLAPSE PUBLIC CLASS DEFINITION
  // ================================

  var Collapse = function (element, options) {
    this.$element      = $(element)
    this.options       = $.extend({}, Collapse.DEFAULTS, options)
    this.$trigger      = $('[data-toggle="collapse"][href="#' + element.id + '"],' +
                           '[data-toggle="collapse"][data-target="#' + element.id + '"]')
    this.transitioning = null

    if (this.options.parent) {
      this.$parent = this.getParent()
    } else {
      this.addAriaAndCollapsedClass(this.$element, this.$trigger)
    }

    if (this.options.toggle) this.toggle()
  }

  Collapse.VERSION  = '3.3.7'

  Collapse.TRANSITION_DURATION = 350

  Collapse.DEFAULTS = {
    toggle: true
  }

  Collapse.prototype.dimension = function () {
    var hasWidth = this.$element.hasClass('width')
    return hasWidth ? 'width' : 'height'
  }

  Collapse.prototype.show = function () {
    if (this.transitioning || this.$element.hasClass('in')) return

    var activesData
    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')

    if (actives && actives.length) {
      activesData = actives.data('bs.collapse')
      if (activesData && activesData.transitioning) return
    }

    var startEvent = $.Event('show.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    if (actives && actives.length) {
      Plugin.call(actives, 'hide')
      activesData || actives.data('bs.collapse', null)
    }

    var dimension = this.dimension()

    this.$element
      .removeClass('collapse')
      .addClass('collapsing')[dimension](0)
      .attr('aria-expanded', true)

    this.$trigger
      .removeClass('collapsed')
      .attr('aria-expanded', true)

    this.transitioning = 1

    var complete = function () {
      this.$element
        .removeClass('collapsing')
        .addClass('collapse in')[dimension]('')
      this.transitioning = 0
      this.$element
        .trigger('shown.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    var scrollSize = $.camelCase(['scroll', dimension].join('-'))

    this.$element
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
  }

  Collapse.prototype.hide = function () {
    if (this.transitioning || !this.$element.hasClass('in')) return

    var startEvent = $.Event('hide.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var dimension = this.dimension()

    this.$element[dimension](this.$element[dimension]())[0].offsetHeight

    this.$element
      .addClass('collapsing')
      .removeClass('collapse in')
      .attr('aria-expanded', false)

    this.$trigger
      .addClass('collapsed')
      .attr('aria-expanded', false)

    this.transitioning = 1

    var complete = function () {
      this.transitioning = 0
      this.$element
        .removeClass('collapsing')
        .addClass('collapse')
        .trigger('hidden.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    this.$element
      [dimension](0)
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)
  }

  Collapse.prototype.toggle = function () {
    this[this.$element.hasClass('in') ? 'hide' : 'show']()
  }

  Collapse.prototype.getParent = function () {
    return $(this.options.parent)
      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')
      .each($.proxy(function (i, element) {
        var $element = $(element)
        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
      }, this))
      .end()
  }

  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {
    var isOpen = $element.hasClass('in')

    $element.attr('aria-expanded', isOpen)
    $trigger
      .toggleClass('collapsed', !isOpen)
      .attr('aria-expanded', isOpen)
  }

  function getTargetFromTrigger($trigger) {
    var href
    var target = $trigger.attr('data-target')
      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7

    return $(target)
  }


  // COLLAPSE PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.collapse')
      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false
      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.collapse

  $.fn.collapse             = Plugin
  $.fn.collapse.Constructor = Collapse


  // COLLAPSE NO CONFLICT
  // ====================

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }


  // COLLAPSE DATA-API
  // =================

  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {
    var $this   = $(this)

    if (!$this.attr('data-target')) e.preventDefault()

    var $target = getTargetFromTrigger($this)
    var data    = $target.data('bs.collapse')
    var option  = data ? 'toggle' : $this.data()

    Plugin.call($target, option)
  })

}(jQuery);
</script>
<script>
window.initializeCodeFolding = function(show) {

  // handlers for show-all and hide all
  $("#rmd-show-all-code").click(function() {
    $('div.r-code-collapse').each(function() {
      $(this).collapse('show');
    });
  });
  $("#rmd-hide-all-code").click(function() {
    $('div.r-code-collapse').each(function() {
      $(this).collapse('hide');
    });
  });

  // index for unique code element ids
  var currentIndex = 1;

  // select all R code blocks
  var rCodeBlocks = $('pre.sourceCode, pre.r, pre.python, pre.bash, pre.sql, pre.cpp, pre.stan, pre.js');
  rCodeBlocks.each(function() {

    // create a collapsable div to wrap the code in
    var div = $('<div class="collapse r-code-collapse"></div>');
    if (show)
      div.addClass('in');
    var id = 'rcode-643E0F36' + currentIndex++;
    div.attr('id', id);
    $(this).before(div);
    $(this).detach().appendTo(div);

    // add a show code button right above
    var showCodeText = $('<span>' + (show ? 'Hide' : 'Code') + '</span>');
    var showCodeButton = $('<button type="button" class="btn btn-default btn-xs code-folding-btn pull-right"></button>');
    showCodeButton.append(showCodeText);
    showCodeButton
        .attr('data-toggle', 'collapse')
        .attr('data-target', '#' + id)
        .attr('aria-expanded', show)
        .attr('aria-controls', id);

    var buttonRow = $('<div class="row"></div>');
    var buttonCol = $('<div class="col-md-12"></div>');

    buttonCol.append(showCodeButton);
    buttonRow.append(buttonCol);

    div.before(buttonRow);

    // update state of button on show/hide
    div.on('hidden.bs.collapse', function () {
      showCodeText.text('Code');
    });
    div.on('show.bs.collapse', function () {
      showCodeText.text('Hide');
    });
  });

}
</script>
<script>
/* ========================================================================
 * Bootstrap: dropdown.js v3.3.7
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // DROPDOWN CLASS DEFINITION
  // =========================

  var backdrop = '.dropdown-backdrop'
  var toggle   = '[data-toggle="dropdown"]'
  var Dropdown = function (element) {
    $(element).on('click.bs.dropdown', this.toggle)
  }

  Dropdown.VERSION = '3.3.7'

  function getParent($this) {
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    var $parent = selector && $(selector)

    return $parent && $parent.length ? $parent : $this.parent()
  }

  function clearMenus(e) {
    if (e && e.which === 3) return
    $(backdrop).remove()
    $(toggle).each(function () {
      var $this         = $(this)
      var $parent       = getParent($this)
      var relatedTarget = { relatedTarget: this }

      if (!$parent.hasClass('open')) return

      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return

      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this.attr('aria-expanded', 'false')
      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))
    })
  }

  Dropdown.prototype.toggle = function (e) {
    var $this = $(this)

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    clearMenus()

    if (!isActive) {
      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
        // if mobile we use a backdrop because click events don't delegate
        $(document.createElement('div'))
          .addClass('dropdown-backdrop')
          .insertAfter($(this))
          .on('click', clearMenus)
      }

      var relatedTarget = { relatedTarget: this }
      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this
        .trigger('focus')
        .attr('aria-expanded', 'true')

      $parent
        .toggleClass('open')
        .trigger($.Event('shown.bs.dropdown', relatedTarget))
    }

    return false
  }

  Dropdown.prototype.keydown = function (e) {
    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return

    var $this = $(this)

    e.preventDefault()
    e.stopPropagation()

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    if (!isActive && e.which != 27 || isActive && e.which == 27) {
      if (e.which == 27) $parent.find(toggle).trigger('focus')
      return $this.trigger('click')
    }

    var desc = ' li:not(.disabled):visible a'
    var $items = $parent.find('.dropdown-menu' + desc)

    if (!$items.length) return

    var index = $items.index(e.target)

    if (e.which == 38 && index > 0)                 index--         // up
    if (e.which == 40 && index < $items.length - 1) index++         // down
    if (!~index)                                    index = 0

    $items.eq(index).trigger('focus')
  }


  // DROPDOWN PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.dropdown')

      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  var old = $.fn.dropdown

  $.fn.dropdown             = Plugin
  $.fn.dropdown.Constructor = Dropdown


  // DROPDOWN NO CONFLICT
  // ====================

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old
    return this
  }


  // APPLY TO STANDARD DROPDOWN ELEMENTS
  // ===================================

  $(document)
    .on('click.bs.dropdown.data-api', clearMenus)
    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)
    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)

}(jQuery);
</script>
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
.row { display: flex; }
.collapse { display: none; }
.in { display:block }
.pull-right > .dropdown-menu {
    right: 0;
    left: auto;
}
.open > .dropdown-menu {
    display: block;
}
.dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 1000;
    display: none;
    float: left;
    min-width: 160px;
    padding: 5px 0;
    margin: 2px 0 0;
    font-size: 14px;
    text-align: left;
    list-style: none;
    background-color: #fff;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
    border: 1px solid #ccc;
    border: 1px solid rgba(0,0,0,.15);
    border-radius: 4px;
    -webkit-box-shadow: 0 6px 12px rgba(0,0,0,.175);
    box-shadow: 0 6px 12px rgba(0,0,0,.175);
}
</style>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "hide");
});
</script>


<script>
document.write('<div class="btn-group pull-right" style="position: absolute; top: 10%; right: 15%; z-index: 200"><button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" data-_extension-text-contrast=""><span>Code</span> <span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div>')
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="support/tufte_plus.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li><a href="introduction.html#basic-statistical-approaches-and-frameworks"><span>Basic statistical approaches and frameworks</span></a></li>
<li><a href="introduction.html#regression-and-control-approaches-robustness"><span>Regression and control approaches, robustness</span></a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#causal-inference-through-observation-caus_inf_obs"><i class="fa fa-check"></i>Causal inference through observation{-#caus_inf_obs}</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#causal-paths-and-levels-of-aggregation"><i class="fa fa-check"></i>Causal paths and levels of aggregation</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#experiments-and-surveys-design-and-analysis"><i class="fa fa-check"></i>Experiments and surveys: design and analysis</a></li>
</ul></li>
<li><a href="other-approaches-techniques-and-applications.html#other-approaches-techniques-and-applications"><span>Other approaches, techniques, and applications</span></a>
<ul>
<li class="chapter" data-level="" data-path="other-approaches-techniques-and-applications.html"><a href="other-approaches-techniques-and-applications.html"><i class="fa fa-check"></i>Some key resources and references</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="conceptual.html"><a href="conceptual.html"><i class="fa fa-check"></i><b>2</b> <strong>BASIC STATISTICAL APPROACHES AND FRAMEWORKS</strong></a>
<ul>
<li class="chapter" data-level="2.1" data-path="conceptual.html"><a href="conceptual.html#learning-and-optimization-as-an-alternative-to-statistical-inference"><i class="fa fa-check"></i><b>2.1</b> ‘Learning and optimization’ as an alternative to statistical inference</a></li>
<li class="chapter" data-level="2.2" data-path="conceptual.html"><a href="conceptual.html#statistical-inference"><i class="fa fa-check"></i><b>2.2</b> Statistical inference</a></li>
<li class="chapter" data-level="2.3" data-path="conceptual.html"><a href="conceptual.html#bayesian-vs.-frequentist-approaches"><i class="fa fa-check"></i><b>2.3</b> Bayesian vs. frequentist approaches</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="conceptual.html"><a href="conceptual.html#interpretation-of-frequentist-cis-aside"><i class="fa fa-check"></i><b>2.3.1</b> Interpretation of frequentist CI’s (aside)</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="conceptual.html"><a href="conceptual.html#causal-vs.-descriptive-treatment-effects-and-the-potential-outcomes-causal-model"><i class="fa fa-check"></i><b>2.4</b> Causal vs. descriptive; ‘treatment effects’ and the potential outcomes causal model</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="conceptual.html"><a href="conceptual.html#dags-and-potential-outcomes"><i class="fa fa-check"></i><b>2.4.1</b> DAGs and Potential outcomes</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="conceptual.html"><a href="conceptual.html#theory-restrictions-and-structural-vs-reduced-form"><i class="fa fa-check"></i><b>2.5</b> Theory, restrictions, and ‘structural vs reduced form’</a></li>
<li class="chapter" data-level="2.6" data-path="conceptual.html"><a href="conceptual.html#hypothesis-testing"><i class="fa fa-check"></i><b>2.6</b> ‘Hypothesis testing’</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="conceptual.html"><a href="conceptual.html#mcelreaths-critique"><i class="fa fa-check"></i><b>2.6.1</b> McElreath’s critique</a></li>
<li class="chapter" data-level="2.6.2" data-path="conceptual.html"><a href="conceptual.html#bayesian-vs.-frequentist-hypothesis-testing"><i class="fa fa-check"></i><b>2.6.2</b> Bayesian vs. frequentist hypothesis ‘testing’</a></li>
<li class="chapter" data-level="2.6.3" data-path="conceptual.html"><a href="conceptual.html#individual-vs.-joint-hypothesis-testing-what-does-it-mean"><i class="fa fa-check"></i><b>2.6.3</b> Individual vs. joint hypothesis testing: what does it mean?</a></li>
<li class="chapter" data-level="2.6.4" data-path="conceptual.html"><a href="conceptual.html#other-issues"><i class="fa fa-check"></i><b>2.6.4</b> Other issues</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="hypothesis-testing-statistical-comparisons-and-inferences.html"><a href="hypothesis-testing-statistical-comparisons-and-inferences.html"><i class="fa fa-check"></i><b>3</b> Hypothesis testing, statistical comparisons and inferences</a>
<ul>
<li class="chapter" data-level="3.1" data-path="hypothesis-testing-statistical-comparisons-and-inferences.html"><a href="hypothesis-testing-statistical-comparisons-and-inferences.html#frequentist"><i class="fa fa-check"></i><b>3.1</b> Frequentist</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="hypothesis-testing-statistical-comparisons-and-inferences.html"><a href="hypothesis-testing-statistical-comparisons-and-inferences.html#parametric"><i class="fa fa-check"></i><b>3.1.1</b> Parametric</a></li>
<li class="chapter" data-level="3.1.2" data-path="hypothesis-testing-statistical-comparisons-and-inferences.html"><a href="hypothesis-testing-statistical-comparisons-and-inferences.html#nonparametric"><i class="fa fa-check"></i><b>3.1.2</b> Nonparametric</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="hypothesis-testing-statistical-comparisons-and-inferences.html"><a href="hypothesis-testing-statistical-comparisons-and-inferences.html#randomization-and-permutation-based"><i class="fa fa-check"></i><b>3.2</b> Randomization and permutation-based</a></li>
<li class="chapter" data-level="3.3" data-path="hypothesis-testing-statistical-comparisons-and-inferences.html"><a href="hypothesis-testing-statistical-comparisons-and-inferences.html#bayesian-and-hybrid"><i class="fa fa-check"></i><b>3.3</b> Bayesian and hybrid</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="hypothesis-testing-statistical-comparisons-and-inferences.html"><a href="hypothesis-testing-statistical-comparisons-and-inferences.html#b-factor"><i class="fa fa-check"></i><b>3.3.1</b> Bayes factor – what is it, what can it do?</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="hypothesis-testing-statistical-comparisons-and-inferences.html"><a href="hypothesis-testing-statistical-comparisons-and-inferences.html#packages-the-infer-package-in-r"><i class="fa fa-check"></i><b>3.4</b> Packages: The “Infer” package in R</a>
<ul>
<li class="chapter" data-level="" data-path="hypothesis-testing-statistical-comparisons-and-inferences.html"><a href="hypothesis-testing-statistical-comparisons-and-inferences.html#overview"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="3.4.1" data-path="hypothesis-testing-statistical-comparisons-and-inferences.html"><a href="hypothesis-testing-statistical-comparisons-and-inferences.html#specify-specifying-response-and-explanatory-variables"><i class="fa fa-check"></i><b>3.4.1</b> <code>SPECIFY()</code>: Specifying response (and explanatory) variables</a></li>
</ul></li>
</ul></li>
<li><a href="reg-control.html#reg_control"><strong>REGRESSION AND CONTROL APPROACHES, ROBUSTNESS</strong></a></li>
<li class="chapter" data-level="4" data-path="reg-follies.html"><a href="reg-follies.html"><i class="fa fa-check"></i><b>4</b> Basic statistical inference and regressions: Common mistakes and issues</a>
<ul>
<li class="chapter" data-level="4.1" data-path="reg-follies.html"><a href="reg-follies.html#basic-regression-and-statistical-inference-common-mistakes-and-issues-briefly-listed"><i class="fa fa-check"></i><b>4.1</b> Basic regression and statistical inference: Common mistakes and issues briefly listed</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="reg-follies.html"><a href="reg-follies.html#bad-control"><i class="fa fa-check"></i><b>4.1.1</b> Bad control</a></li>
<li class="chapter" data-level="4.1.2" data-path="reg-follies.html"><a href="reg-follies.html#does-controlling-for-more-increase-the-probability-that-a-controlled-difference-between-too-groups-represents-a-causal-effect-not-really-informal-discussion-in-fold"><i class="fa fa-check"></i><b>4.1.2</b> Does ‘controlling for more’ increase the probability that a (controlled) difference between too groups represents a causal effect? Not really (Informal discussion in fold)</a></li>
<li class="chapter" data-level="4.1.3" data-path="reg-follies.html"><a href="reg-follies.html#bad-control-colliders"><i class="fa fa-check"></i><b>4.1.3</b> “Bad control” (“colliders”)</a></li>
<li class="chapter" data-level="4.1.4" data-path="reg-follies.html"><a href="reg-follies.html#choices-of-lhs-and-rhs-variables"><i class="fa fa-check"></i><b>4.1.4</b> Choices of lhs and rhs variables</a></li>
<li class="chapter" data-level="4.1.5" data-path="reg-follies.html"><a href="reg-follies.html#functional-form"><i class="fa fa-check"></i><b>4.1.5</b> Functional form</a></li>
<li class="chapter" data-level="4.1.6" data-path="reg-follies.html"><a href="reg-follies.html#ols-and-heterogeneity"><i class="fa fa-check"></i><b>4.1.6</b> OLS and heterogeneity</a></li>
<li class="chapter" data-level="4.1.7" data-path="reg-follies.html"><a href="reg-follies.html#null-effects"><i class="fa fa-check"></i><b>4.1.7</b> “Null effects”</a></li>
<li class="chapter" data-level="4.1.8" data-path="reg-follies.html"><a href="reg-follies.html#multi-var-tests"><i class="fa fa-check"></i><b>4.1.8</b> Multivariate tests and ‘tests for non-independence’</a></li>
<li class="chapter" data-level="4.1.9" data-path="reg-follies.html"><a href="reg-follies.html#mht"><i class="fa fa-check"></i><b>4.1.9</b> Multiple hypothesis testing (MHT)</a></li>
<li class="chapter" data-level="4.1.10" data-path="reg-follies.html"><a href="reg-follies.html#interaction-terms-and-pitfalls"><i class="fa fa-check"></i><b>4.1.10</b> Interaction terms and pitfalls</a></li>
<li class="chapter" data-level="4.1.11" data-path="reg-follies.html"><a href="reg-follies.html#choice-of-test-statistics-including-nonparametric"><i class="fa fa-check"></i><b>4.1.11</b> Choice of test statistics (including nonparametric)</a></li>
<li class="chapter" data-level="4.1.12" data-path="reg-follies.html"><a href="reg-follies.html#how-to-display-and-write-about-regression-results-and-tests"><i class="fa fa-check"></i><b>4.1.12</b> How to display and write about regression results and tests</a></li>
<li class="chapter" data-level="4.1.13" data-path="reg-follies.html"><a href="reg-follies.html#bayesian-interpretations-of-results"><i class="fa fa-check"></i><b>4.1.13</b> Bayesian interpretations of results</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="reg-follies.html"><a href="reg-follies.html#aside-effect-and-contrast-coding-of-categorical-variables"><i class="fa fa-check"></i><b>4.2</b> Aside: effect and contrast coding of categorical variables</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="robust-diag.html"><a href="robust-diag.html"><i class="fa fa-check"></i><b>5</b> Robustness and diagnostics, with integrity; Open Science resources</a>
<ul>
<li class="chapter" data-level="5.1" data-path="robust-diag.html"><a href="robust-diag.html#how-can-diagnostic-tests-make-sense-where-is-the-burden-of-proof"><i class="fa fa-check"></i><b>5.1</b> (How) can diagnostic tests make sense? Where is the burden of proof?</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="robust-diag.html"><a href="robust-diag.html#further-discussion-the-did-approach-and-parallel-trends"><i class="fa fa-check"></i><b>5.1.1</b> Further discussion: the DiD approach and ‘parallel trends’</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="robust-diag.html"><a href="robust-diag.html#estimating-standard-errors"><i class="fa fa-check"></i><b>5.2</b> Estimating standard errors</a></li>
<li class="chapter" data-level="5.3" data-path="robust-diag.html"><a href="robust-diag.html#sensitivity-analysis-interactive-presentation"><i class="fa fa-check"></i><b>5.3</b> Sensitivity analysis: Interactive presentation</a></li>
<li class="chapter" data-level="5.4" data-path="robust-diag.html"><a href="robust-diag.html#supplement-open-science-resources-tools-and-considerations"><i class="fa fa-check"></i><b>5.4</b> Supplement: open science resources, tools and considerations</a></li>
<li class="chapter" data-level="5.5" data-path="robust-diag.html"><a href="robust-diag.html#diagnosing-p-hacking-and-publication-bias-see-also-meta-analysis"><i class="fa fa-check"></i><b>5.5</b> Diagnosing p-hacking and publication bias (see also <span>meta-analysis</span>)</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="robust-diag.html"><a href="robust-diag.html#publication-bias-see-also-considering-publication-bias-in-meta-analysis"><i class="fa fa-check"></i><b>5.5.1</b> Publication bias – see also <span>considering publication bias in meta-analysis</span></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="robust-diag.html"><a href="robust-diag.html#multiple-hypothesis-testing---see-above"><i class="fa fa-check"></i><b>5.6</b> <span>Multiple hypothesis testing - see above</span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="control-ml.html"><a href="control-ml.html"><i class="fa fa-check"></i><b>6</b> Control strategies and prediction, Machine Learning (Statistical Learning) approaches</a>
<ul>
<li class="chapter" data-level="6.1" data-path="control-ml.html"><a href="control-ml.html#see-also-notes-on-data-science-for-business"><i class="fa fa-check"></i><b>6.1</b> See also <span>“notes on Data Science for Business”</span></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="control-ml.html"><a href="control-ml.html#limitations-to-inference-from-learning-approaches"><i class="fa fa-check"></i><b>6.1.1</b> Limitations to inference from learning approaches</a></li>
<li class="chapter" data-level="6.1.2" data-path="control-ml.html"><a href="control-ml.html#tree-models"><i class="fa fa-check"></i><b>6.1.2</b> Tree models</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="control-ml.html"><a href="control-ml.html#notes-hastie-statistical-learning-with-sparsity"><i class="fa fa-check"></i><b>6.2</b> Notes Hastie: Statistical Learning with Sparsity</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="control-ml.html"><a href="control-ml.html#introduction-1"><i class="fa fa-check"></i><b>6.2.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2.2" data-path="control-ml.html"><a href="control-ml.html#ch2-lasso-for-linear-models"><i class="fa fa-check"></i><b>6.2.2</b> Ch2: Lasso for linear models</a></li>
<li class="chapter" data-level="6.2.3" data-path="control-ml.html"><a href="control-ml.html#chapter-3-generalized-linear-models"><i class="fa fa-check"></i><b>6.2.3</b> Chapter 3: Generalized linear models</a></li>
<li class="chapter" data-level="6.2.4" data-path="control-ml.html"><a href="control-ml.html#chapter-4-generalizations-of-the-lasso-penalty"><i class="fa fa-check"></i><b>6.2.4</b> Chapter 4: Generalizations of the Lasso penalty</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="control-ml.html"><a href="control-ml.html#notes-mullainathan"><i class="fa fa-check"></i><b>6.3</b> Notes: Mullainathan</a></li>
</ul></li>
<li><a href="caus-inf-obs.html#caus_inf_obs"><strong>CAUSAL INFERENCE THROUGH OBSERVATION</strong></a></li>
<li class="chapter" data-level="7" data-path="iv-limitations.html"><a href="iv-limitations.html"><i class="fa fa-check"></i><b>7</b> Causal inference: IV (instrumental variables) and its limitations</a>
<ul>
<li class="chapter" data-level="" data-path="iv-limitations.html"><a href="iv-limitations.html#some-casual-discussion"><i class="fa fa-check"></i>Some casual discussion</a></li>
<li class="chapter" data-level="7.1" data-path="iv-limitations.html"><a href="iv-limitations.html#instrument-validity"><i class="fa fa-check"></i><b>7.1</b> Instrument validity</a></li>
<li class="chapter" data-level="7.2" data-path="iv-limitations.html"><a href="iv-limitations.html#heterogeneity-and-late"><i class="fa fa-check"></i><b>7.2</b> Heterogeneity and LATE</a></li>
<li class="chapter" data-level="7.3" data-path="iv-limitations.html"><a href="iv-limitations.html#weak-instruments-other-issues"><i class="fa fa-check"></i><b>7.3</b> Weak instruments, other issues</a></li>
<li class="chapter" data-level="7.4" data-path="iv-limitations.html"><a href="iv-limitations.html#instrumenting-interactions"><i class="fa fa-check"></i><b>7.4</b> Instrumenting Interactions</a></li>
<li class="chapter" data-level="7.5" data-path="iv-limitations.html"><a href="iv-limitations.html#reference-to-the-use-of-iv-in-experimentsmediation"><i class="fa fa-check"></i><b>7.5</b> Reference to the use of IV in experiments/mediation</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="causal-inference-other-paths-to-observational-identification.html"><a href="causal-inference-other-paths-to-observational-identification.html"><i class="fa fa-check"></i><b>8</b> <span id="other_paths">Causal inference: Other paths to observational identification</span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="causal-inference-other-paths-to-observational-identification.html"><a href="causal-inference-other-paths-to-observational-identification.html#fixed-effects-and-differencing"><i class="fa fa-check"></i><b>8.1</b> Fixed effects and differencing</a></li>
<li class="chapter" data-level="8.2" data-path="causal-inference-other-paths-to-observational-identification.html"><a href="causal-inference-other-paths-to-observational-identification.html#did"><i class="fa fa-check"></i><b>8.2</b> DiD</a></li>
<li class="chapter" data-level="8.3" data-path="causal-inference-other-paths-to-observational-identification.html"><a href="causal-inference-other-paths-to-observational-identification.html#rd"><i class="fa fa-check"></i><b>8.3</b> RD</a></li>
<li class="chapter" data-level="8.4" data-path="causal-inference-other-paths-to-observational-identification.html"><a href="causal-inference-other-paths-to-observational-identification.html#time-series-ish-panel-approaches-to-micro"><i class="fa fa-check"></i><b>8.4</b> Time-series-ish panel approaches to micro</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="causal-inference-other-paths-to-observational-identification.html"><a href="causal-inference-other-paths-to-observational-identification.html#lagged-dependent-variable-and-fixed-effects-nickel-bias"><i class="fa fa-check"></i><b>8.4.1</b> Lagged dependent variable and fixed effects –&gt; ‘Nickel bias’</a></li>
<li class="chapter" data-level="8.4.2" data-path="causal-inference-other-paths-to-observational-identification.html"><a href="causal-inference-other-paths-to-observational-identification.html#apc-effects"><i class="fa fa-check"></i><b>8.4.2</b> Age-period-cohort effects</a></li>
</ul></li>
</ul></li>
<li><a href="causal-paths-and-levels-of-aggregation-1.html#causal-paths-and-levels-of-aggregation-1"><strong>CAUSAL PATHS AND LEVELS OF AGGREGATION</strong></a></li>
<li class="chapter" data-level="9" data-path="mediators.html"><a href="mediators.html"><i class="fa fa-check"></i><b>9</b> Mediation modeling and its massive limitations</a>
<ul>
<li class="chapter" data-level="9.1" data-path="mediators.html"><a href="mediators.html#mediators-and-selection-and-roy-models-a-review-considering-two-research-applications"><i class="fa fa-check"></i><b>9.1</b> Mediators (and selection and Roy models): a review, considering two research applications</a></li>
<li class="chapter" data-level="9.2" data-path="mediators.html"><a href="mediators.html#dr-initial-thoughts-for-nl-education-paper"><i class="fa fa-check"></i><b>9.2</b> DR initial thoughts (for NL education paper)</a></li>
<li class="chapter" data-level="9.3" data-path="mediators.html"><a href="mediators.html#econometric-mediation-analyses-heckman-and-pinto"><i class="fa fa-check"></i><b>9.3</b> Econometric Mediation Analyses (Heckman and Pinto)</a>
<ul>
<li class="chapter" data-level="" data-path="mediators.html"><a href="mediators.html#relevance-to-parey-et-al"><i class="fa fa-check"></i>Relevance to Parey et al</a></li>
<li class="chapter" data-level="9.3.1" data-path="mediators.html"><a href="mediators.html#summary-and-key-modeling"><i class="fa fa-check"></i><b>9.3.1</b> Summary and key modeling</a></li>
<li class="chapter" data-level="9.3.2" data-path="mediators.html"><a href="mediators.html#common-assumptions-and-their-implications"><i class="fa fa-check"></i><b>9.3.2</b> Common assumptions and their implications</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="mediators.html"><a href="mediators.html#pinto-2015-selection-bias-in-a-controlled-experiment-the-case-of-moving-to-opportunity"><i class="fa fa-check"></i><b>9.4</b> Pinto (2015), Selection Bias in a Controlled Experiment: The Case of Moving to Opportunity</a>
<ul>
<li class="chapter" data-level="" data-path="mediators.html"><a href="mediators.html#summary"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="mediators.html"><a href="mediators.html#relevance-to-parey-et-al-1"><i class="fa fa-check"></i>Relevance to Parey et al</a></li>
<li class="chapter" data-level="" data-path="mediators.html"><a href="mediators.html#introduction-2"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="mediators.html"><a href="mediators.html#identification-strategy-brief"><i class="fa fa-check"></i>Identification strategy brief</a></li>
<li class="chapter" data-level="" data-path="mediators.html"><a href="mediators.html#results-in-brief"><i class="fa fa-check"></i>Results in brief</a></li>
<li class="chapter" data-level="" data-path="mediators.html"><a href="mediators.html#framework-first-for-binarybinary-simplification"><i class="fa fa-check"></i>Framework: first for binary/binary (simplification)</a></li>
<li class="chapter" data-level="" data-path="mediators.html"><a href="mediators.html#framework-for-mto-multiple-treatment-groups-multiple-choices"><i class="fa fa-check"></i>Framework for MTO multiple treatment groups, multiple choices</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="mediators.html"><a href="mediators.html#antonakis-approaches"><i class="fa fa-check"></i><b>9.5</b> Antonakis approaches</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="selection-cop.html"><a href="selection-cop.html"><i class="fa fa-check"></i><b>10</b> Selection, corners, hurdles, and ‘conditional on’ estimates</a>
<ul>
<li class="chapter" data-level="10.1" data-path="selection-cop.html"><a href="selection-cop.html#corner-solution-or-hurdle-variables-and-conditional-on-positive"><i class="fa fa-check"></i><b>10.1</b> ‘Corner solution’ or hurdle variables and ‘Conditional on Positive’</a></li>
<li class="chapter" data-level="10.2" data-path="selection-cop.html"><a href="selection-cop.html#bounding-approaches-lee-manski-etc"><i class="fa fa-check"></i><b>10.2</b> Bounding approaches (Lee, Manski, etc)</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="selection-cop.html"><a href="selection-cop.html#notes-training-wages-and-sample-selection-estimating-sharp-bounds-on-treatment-effects-david-lee-2009-restud"><i class="fa fa-check"></i><b>10.2.1</b> Notes: Training, Wages, and Sample Selection: Estimating Sharp Bounds on Treatment Effects, David Lee, 2009, RESTUD</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="mlm.html"><a href="mlm.html"><i class="fa fa-check"></i><b>11</b> Multi-level models</a>
<ul>
<li class="chapter" data-level="11.1" data-path="mlm.html"><a href="mlm.html#introduction-qstep"><i class="fa fa-check"></i><b>11.1</b> Introduction (Qstep)</a></li>
<li class="chapter" data-level="11.2" data-path="mlm.html"><a href="mlm.html#some-basic-theory"><i class="fa fa-check"></i><b>11.2</b> Some basic theory</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="mlm.html"><a href="mlm.html#level-1-model"><i class="fa fa-check"></i><b>11.2.1</b> Level 1 model</a></li>
<li class="chapter" data-level="11.2.2" data-path="mlm.html"><a href="mlm.html#level-2"><i class="fa fa-check"></i><b>11.2.2</b> Level 2</a></li>
<li class="chapter" data-level="11.2.3" data-path="mlm.html"><a href="mlm.html#alternativenaive-approaches"><i class="fa fa-check"></i><b>11.2.3</b> Alternative/Naive approaches</a></li>
<li class="chapter" data-level="11.2.4" data-path="mlm.html"><a href="mlm.html#old-way-two-stage-regression"><i class="fa fa-check"></i><b>11.2.4</b> ‘old way’: two-stage regression</a></li>
<li class="chapter" data-level="11.2.5" data-path="mlm.html"><a href="mlm.html#how-many-higher-level-units-do-you-need"><i class="fa fa-check"></i><b>11.2.5</b> How many higher-level units do you need?</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="mlm.html"><a href="mlm.html#fitting-mlm-in-practice"><i class="fa fa-check"></i><b>11.3</b> Fitting mlm in practice</a></li>
<li class="chapter" data-level="11.4" data-path="mlm.html"><a href="mlm.html#stimuli-treatments-as-a-random-factor"><i class="fa fa-check"></i><b>11.4</b> “Stimuli” (treatments) as a random factor</a></li>
</ul></li>
<li><a href="experiments-and-surveys-design-and-analysis-1.html#experiments-and-surveys-design-and-analysis-1"><strong>EXPERIMENTS AND SURVEYS: DESIGN AND ANALYSIS</strong></a></li>
<li class="chapter" data-level="12" data-path="surveys.html"><a href="surveys.html"><i class="fa fa-check"></i><b>12</b> Survey design and implementation; analysis of survey data</a>
<ul>
<li class="chapter" data-level="12.1" data-path="surveys.html"><a href="surveys.html#survey-samplingintake"><i class="fa fa-check"></i><b>12.1</b> Survey sampling/intake</a>
<ul>
<li class="chapter" data-level="" data-path="surveys.html"><a href="surveys.html#probability-sampling"><i class="fa fa-check"></i>Probability sampling</a></li>
<li class="chapter" data-level="" data-path="surveys.html"><a href="surveys.html#np-sampling"><i class="fa fa-check"></i>Non-probability sampling</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="surveys.html"><a href="surveys.html#jazz-case"><i class="fa fa-check"></i><b>12.2</b> Case: Surveying an unmeasured and rare population surrounding a ‘social movement’</a>
<ul>
<li class="chapter" data-level="" data-path="surveys.html"><a href="surveys.html#background-and-setup"><i class="fa fa-check"></i>Background and setup</a></li>
<li class="chapter" data-level="" data-path="surveys.html"><a href="surveys.html#our-convenience-method-issues-alternatives"><i class="fa fa-check"></i>Our ‘convenience’ method; issues, alternatives</a></li>
<li class="chapter" data-level="" data-path="surveys.html"><a href="surveys.html#our-methodological-questions"><i class="fa fa-check"></i>Our methodological questions</a></li>
<li class="chapter" data-level="12.2.1" data-path="surveys.html"><a href="surveys.html#sketched-model-and-approach-bayesian-inferenceupdating-for-estimating-demographics-and-attitudes-of-an-rarehidden-population"><i class="fa fa-check"></i><b>12.2.1</b> Sketched model and approach: Bayesian inference/updating for estimating demographics and attitudes of an rare/hidden population</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="why-experiment-design.html"><a href="why-experiment-design.html"><i class="fa fa-check"></i><b>13</b> Experimental design: Identifying meaningful and useful (causal) relationships and parameters</a>
<ul>
<li class="chapter" data-level="13.1" data-path="why-experiment-design.html"><a href="why-experiment-design.html#why-run-an-experiment-or-study"><i class="fa fa-check"></i><b>13.1</b> Why run an experiment or study?</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="why-experiment-design.html"><a href="why-experiment-design.html#sitzia-and-sugden-on-what-theoretically-driven-experiments-can-and-should-do"><i class="fa fa-check"></i><b>13.1.1</b> Sitzia and Sugden on what theoretically driven experiments can and should do</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="why-experiment-design.html"><a href="why-experiment-design.html#causal-channels-and-identification"><i class="fa fa-check"></i><b>13.2</b> Causal channels and identification</a></li>
<li class="chapter" data-level="13.3" data-path="why-experiment-design.html"><a href="why-experiment-design.html#artifacts"><i class="fa fa-check"></i><b>13.3</b> Types of experiments, ‘demand effects’ and more artifacts of artificial setups</a></li>
<li class="chapter" data-level="13.4" data-path="why-experiment-design.html"><a href="why-experiment-design.html#ws-bs"><i class="fa fa-check"></i><b>13.4</b> Within vs between-subject designs</a></li>
<li class="chapter" data-level="13.5" data-path="why-experiment-design.html"><a href="why-experiment-design.html#generalizability-and-heterogeneity"><i class="fa fa-check"></i><b>13.5</b> Generalizability (and heterogeneity)</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="quant-design-power.html"><a href="quant-design-power.html"><i class="fa fa-check"></i><b>14</b> Robust experimental design: pre-registration and efficient assignment of treatments</a>
<ul>
<li class="chapter" data-level="14.1" data-path="quant-design-power.html"><a href="quant-design-power.html#pre-reg-pap"><i class="fa fa-check"></i><b>14.1</b> Pre-registration and Pre-analysis plans</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="quant-design-power.html"><a href="quant-design-power.html#the-benefits-and-costs-of-pre-registration-a-typical-discussion"><i class="fa fa-check"></i><b>14.1.1</b> The benefits and costs of pre-registration: a typical discussion</a></li>
<li class="chapter" data-level="14.1.2" data-path="quant-design-power.html"><a href="quant-design-power.html#the-hazards-of-specification-searching"><i class="fa fa-check"></i><b>14.1.2</b> The hazards of specification-searching</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="quant-design-power.html"><a href="quant-design-power.html#designs-for-decision-making"><i class="fa fa-check"></i><b>14.2</b> Designs for <em>decision-making</em></a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="quant-design-power.html"><a href="quant-design-power.html#notes-on-bandit-vs-exploration-problemsthompson-vs-exploration-sampling"><i class="fa fa-check"></i><b>14.2.1</b> Notes on Bandit vs Exploration problems/Thompson vs Exploration sampling</a></li>
<li class="chapter" data-level="" data-path="quant-design-power.html"><a href="quant-design-power.html#sequential"><i class="fa fa-check"></i>Sequential</a></li>
<li class="chapter" data-level="14.2.2" data-path="quant-design-power.html"><a href="quant-design-power.html#adaptive"><i class="fa fa-check"></i><b>14.2.2</b> Adaptive</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="quant-design-power.html"><a href="quant-design-power.html#efficient-assignment-of-treatments"><i class="fa fa-check"></i><b>14.3</b> Efficient assignment of treatments</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="quant-design-power.html"><a href="quant-design-power.html#see-also-multiple-hypothesis-testing"><i class="fa fa-check"></i><b>14.3.1</b> See also <span>multiple hypothesis testing</span></a></li>
<li class="chapter" data-level="14.3.2" data-path="quant-design-power.html"><a href="quant-design-power.html#how-many-treatment-arms-can-you-afford"><i class="fa fa-check"></i><b>14.3.2</b> How many treatment arms can you ‘afford?’</a></li>
<li class="chapter" data-level="14.3.3" data-path="quant-design-power.html"><a href="quant-design-power.html#other-notes-and-resources"><i class="fa fa-check"></i><b>14.3.3</b> Other notes and resources</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="power.html"><a href="power.html"><i class="fa fa-check"></i><b>15</b> (Ex-ante) Power calculations for (Experimental) study design</a>
<ul>
<li class="chapter" data-level="15.1" data-path="power.html"><a href="power.html#what-is-the-point-of-doing-a-power-analysis-or-power-calculations"><i class="fa fa-check"></i><b>15.1</b> What is the point of doing a ‘power analysis’ or ‘power calculations?’</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="power.html"><a href="power.html#practical-power"><i class="fa fa-check"></i><b>15.1.1</b> What are the practical benefits of doing a power analysis</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="power.html"><a href="power.html#power-ingredients"><i class="fa fa-check"></i><b>15.2</b> Key ingredients for doing a power analysis (and designing an experimental study in light of this)</a></li>
<li class="chapter" data-level="15.3" data-path="power.html"><a href="power.html#underpowered"><i class="fa fa-check"></i><b>15.3</b> The ‘harm to science’ from running underpowered studies</a></li>
<li class="chapter" data-level="15.4" data-path="power.html"><a href="power.html#power-calculations-without-real-data"><i class="fa fa-check"></i><b>15.4</b> Power calculations without real data</a></li>
<li class="chapter" data-level="15.5" data-path="power.html"><a href="power.html#power-calculations-using-prior-data"><i class="fa fa-check"></i><b>15.5</b> Power calculations using prior data</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="power.html"><a href="power.html#from-reinstein-upcoming-experiment-preregistration"><i class="fa fa-check"></i><b>15.5.1</b> From Reinstein upcoming experiment preregistration</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="power.html"><a href="power.html#lift-test"><i class="fa fa-check"></i><b>15.6</b> Digression: Power calculations/optimal sample size for ‘lift’ in a ranking case</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="power.html"><a href="power.html#design-which-questions-to-ask-the-audience-about-the-proposed-titles-and-in-what-order"><i class="fa fa-check"></i><b>15.6.1</b> Design: Which questions to ask the audience about the proposed titles, and in what order?</a></li>
<li class="chapter" data-level="" data-path="power.html"><a href="power.html#which-statistical-testsanalyses-to-run-if-any-and-what-measures-to-report"><i class="fa fa-check"></i>Which statistical test(s)/analyses to run (if any) and what measures to report?</a></li>
<li class="chapter" data-level="" data-path="power.html"><a href="power.html#how-to-assign-the-treatments-and-how-large-a-sample-is-optimal-considering-power-or-lift"><i class="fa fa-check"></i>How to assign the ‘treatments,’ and how large a sample is optimal, considering ‘power’ (or ‘lift’)?</a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="power.html"><a href="power.html#survey-power-likert"><i class="fa fa-check"></i><b>15.7</b> Survey design digression: sample size for a “precise estimate of a ‘population parameter’” (focus: mean of a Likert scale response)</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="power.html"><a href="power.html#how-to-measure-and-consider-the-precision-of-likert-item-responses"><i class="fa fa-check"></i><b>15.7.1</b> How to measure and consider the precision of Likert-item responses</a></li>
<li class="chapter" data-level="15.7.2" data-path="power.html"><a href="power.html#computing-sample-size-to-achieve-this-precision"><i class="fa fa-check"></i><b>15.7.2</b> Computing sample size to achieve this precision</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="experimetrics-te.html"><a href="experimetrics-te.html"><i class="fa fa-check"></i><b>16</b> ‘Experimetrics’ and measurement of treatment effects from RCTs</a>
<ul>
<li class="chapter" data-level="16.1" data-path="experimetrics-te.html"><a href="experimetrics-te.html#which-error-structure-random-effects"><i class="fa fa-check"></i><b>16.1</b> Which error structure? Random effects?</a></li>
<li class="chapter" data-level="16.2" data-path="experimetrics-te.html"><a href="experimetrics-te.html#randomization-inference"><i class="fa fa-check"></i><b>16.2</b> Randomization inference?</a></li>
<li class="chapter" data-level="16.3" data-path="experimetrics-te.html"><a href="experimetrics-te.html#parametric-and-nonparametric-tests-of-simple-hypotheses"><i class="fa fa-check"></i><b>16.3</b> Parametric and nonparametric tests of simple hypotheses</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="experimetrics-te.html"><a href="experimetrics-te.html#parametric-tests"><i class="fa fa-check"></i><b>16.3.1</b> Parametric tests</a></li>
<li class="chapter" data-level="16.3.2" data-path="experimetrics-te.html"><a href="experimetrics-te.html#non-parametric-tests"><i class="fa fa-check"></i><b>16.3.2</b> Non-parametric tests</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="experimetrics-te.html"><a href="experimetrics-te.html#adjustments-for-exogenous-but-non-random-treatment-assignment"><i class="fa fa-check"></i><b>16.4</b> Adjustments for exogenous (but non-random) treatment assignment</a></li>
<li class="chapter" data-level="16.5" data-path="experimetrics-te.html"><a href="experimetrics-te.html#iv-in-an-experimental-context-to-get-at-mediators"><i class="fa fa-check"></i><b>16.5</b> IV in an experimental context to get at ‘mediators?’</a></li>
<li class="chapter" data-level="16.6" data-path="experimetrics-te.html"><a href="experimetrics-te.html#heterogeneity-in-an-experimental-context"><i class="fa fa-check"></i><b>16.6</b> Heterogeneity in an experimental context</a></li>
<li class="chapter" data-level="16.7" data-path="experimetrics-te.html"><a href="experimetrics-te.html#incorporate-above-notes-on-the-econometrics-of-randomised-experiments-athey-and-imbens"><i class="fa fa-check"></i><b>16.7</b> Incorporate above: Notes on “The econometrics of randomised experiments” (Athey and Imbens)</a>
<ul>
<li class="chapter" data-level="16.7.1" data-path="experimetrics-te.html"><a href="experimetrics-te.html#abstract-and-intro"><i class="fa fa-check"></i><b>16.7.1</b> Abstract and intro</a></li>
<li class="chapter" data-level="16.7.2" data-path="experimetrics-te.html"><a href="experimetrics-te.html#randomised-experiments-and-validity"><i class="fa fa-check"></i><b>16.7.2</b> Randomised experiments and validity</a></li>
<li class="chapter" data-level="16.7.3" data-path="experimetrics-te.html"><a href="experimetrics-te.html#potential-outcomes-rubin-causal-model-framework-covered-earlier"><i class="fa fa-check"></i><b>16.7.3</b> Potential outcomes/ Rubin causal model framework (covered earlier)</a></li>
<li class="chapter" data-level="16.7.4" data-path="experimetrics-te.html"><a href="experimetrics-te.html#classification-of-assignment-mechanisms"><i class="fa fa-check"></i><b>16.7.4</b> 3.2 Classification of assignment mechanisms</a></li>
<li class="chapter" data-level="16.7.5" data-path="experimetrics-te.html"><a href="experimetrics-te.html#the-analysis-of-completely-randomized-experiments"><i class="fa fa-check"></i><b>16.7.5</b> The analysis of Completely randomized experiments</a></li>
<li class="chapter" data-level="16.7.6" data-path="experimetrics-te.html"><a href="experimetrics-te.html#randomization-inference-for-average-treatment-effects"><i class="fa fa-check"></i><b>16.7.6</b> Randomization inference for Average treatment effects</a></li>
<li class="chapter" data-level="16.7.7" data-path="experimetrics-te.html"><a href="experimetrics-te.html#quantile-treatment-effect-infinite-population-context"><i class="fa fa-check"></i><b>16.7.7</b> Quantile treatment effect (Infinite population context)</a></li>
<li class="chapter" data-level="16.7.8" data-path="experimetrics-te.html"><a href="experimetrics-te.html#covariates-if-not-stratified-in-completely-randomized-experiments"><i class="fa fa-check"></i><b>16.7.8</b> Covariates (if not stratified) in completely randomized experiments</a></li>
<li class="chapter" data-level="16.7.9" data-path="experimetrics-te.html"><a href="experimetrics-te.html#randomization-inference-and-regression-estimators"><i class="fa fa-check"></i><b>16.7.9</b> Randomization inference and regression estimators</a></li>
<li class="chapter" data-level="16.7.10" data-path="experimetrics-te.html"><a href="experimetrics-te.html#regression-estimators-with-additional-covariates-dr-seems-important"><i class="fa fa-check"></i><b>16.7.10</b> Regression Estimators with Additional Covariates [DR: seems important]</a></li>
<li class="chapter" data-level="16.7.11" data-path="experimetrics-te.html"><a href="experimetrics-te.html#stratified-randomized-experiments-analysis"><i class="fa fa-check"></i><b>16.7.11</b> Stratified randomized experiments: analysis</a></li>
<li class="chapter" data-level="16.7.12" data-path="experimetrics-te.html"><a href="experimetrics-te.html#the-design-of-randomised-experiments-and-the-benefits-of-stratification"><i class="fa fa-check"></i><b>16.7.12</b> 7 The Design of randomised experiments and the benefits of stratification</a></li>
<li class="chapter" data-level="16.7.13" data-path="experimetrics-te.html"><a href="experimetrics-te.html#power-calculations"><i class="fa fa-check"></i><b>16.7.13</b> 7.1 Power calculations</a></li>
<li class="chapter" data-level="16.7.14" data-path="experimetrics-te.html"><a href="experimetrics-te.html#stratified-randomized-experiments-benefits"><i class="fa fa-check"></i><b>16.7.14</b> Stratified randomized experiments: Benefits</a></li>
<li class="chapter" data-level="16.7.15" data-path="experimetrics-te.html"><a href="experimetrics-te.html#re-randomization"><i class="fa fa-check"></i><b>16.7.15</b> Re-randomization</a></li>
<li class="chapter" data-level="16.7.16" data-path="experimetrics-te.html"><a href="experimetrics-te.html#analysis-of-clustered-randomised-experiments"><i class="fa fa-check"></i><b>16.7.16</b> Analysis of Clustered Randomised Experiments</a></li>
<li class="chapter" data-level="16.7.17" data-path="experimetrics-te.html"><a href="experimetrics-te.html#noncompliance-in-randomized-experiments-dr-relevant-to-nl-lottery-not-to-charity-experiments"><i class="fa fa-check"></i><b>16.7.17</b> Noncompliance in randomized experiments (DR: Relevant to NL lottery, not to charity experiments)</a></li>
<li class="chapter" data-level="16.7.18" data-path="experimetrics-te.html"><a href="experimetrics-te.html#heterogenous-treatment-effects-and-pretreatment-variables"><i class="fa fa-check"></i><b>16.7.18</b> Heterogenous Treatment Effects and Pretreatment Variables</a></li>
<li class="chapter" data-level="16.7.19" data-path="experimetrics-te.html"><a href="experimetrics-te.html#data-driven-subgroup-analysis-recursive-partitioning-for-treatment-effects"><i class="fa fa-check"></i><b>16.7.19</b> Data-driven Subgroup Analysis: Recursive Partitioning for Treatment Effects</a></li>
<li class="chapter" data-level="16.7.20" data-path="experimetrics-te.html"><a href="experimetrics-te.html#non-parametric-estimation-of-treatment-effect-heterogeneity"><i class="fa fa-check"></i><b>16.7.20</b> 10.3.2 Non-Parametric Estimation of Treatment Effect Heterogeneity</a></li>
<li class="chapter" data-level="16.7.21" data-path="experimetrics-te.html"><a href="experimetrics-te.html#treatment-effect-heterogeneity-using-regularized-regression"><i class="fa fa-check"></i><b>16.7.21</b> 10.3.3 Treatment Effect Heterogeneity Using Regularized Regression</a></li>
<li class="chapter" data-level="16.7.22" data-path="experimetrics-te.html"><a href="experimetrics-te.html#comparison-of-methods"><i class="fa fa-check"></i><b>16.7.22</b> 10.3.4 Comparison of Methods</a></li>
</ul></li>
</ul></li>
<li><a href="other-approaches.html#other_approaches"><strong>OTHER APPROACHES, TECHNIQUES, AND APPLICATIONS</strong></a></li>
<li class="chapter" data-level="17" data-path="psychometrics.html"><a href="psychometrics.html"><i class="fa fa-check"></i><b>17</b> Boiling down: Construct validation/reliability, dimension reduction, factor analysis, and Psychometrics</a>
<ul>
<li class="chapter" data-level="17.1" data-path="psychometrics.html"><a href="psychometrics.html#constructs-and-construct-validation-and-reliability"><i class="fa fa-check"></i><b>17.1</b> Constructs and construct validation and reliability</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="psychometrics.html"><a href="psychometrics.html#validity-general-discussion"><i class="fa fa-check"></i><b>17.1.1</b> Validity: general discussion</a></li>
<li class="chapter" data-level="17.1.2" data-path="psychometrics.html"><a href="psychometrics.html#reliability-general-discussion"><i class="fa fa-check"></i><b>17.1.2</b> Reliability: general discussion</a></li>
<li class="chapter" data-level="17.1.3" data-path="psychometrics.html"><a href="psychometrics.html#raykovmetaanalysisscalereliability2013"><i class="fa fa-check"></i><b>17.1.3</b> <span class="citation"><span>Raykov and Marcoulides</span> (<span>2013</span>)</span></a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="psychometrics.html"><a href="psychometrics.html#factor-analysis-and-principal-component-analysis"><i class="fa fa-check"></i><b>17.2</b> Factor analysis and principal-component analysis</a></li>
<li class="chapter" data-level="17.3" data-path="psychometrics.html"><a href="psychometrics.html#other"><i class="fa fa-check"></i><b>17.3</b> Other</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="metaanalysis.html"><a href="metaanalysis.html"><i class="fa fa-check"></i><b>18</b> Meta-analysis and combining studies: Making inferences from previous work</a>
<ul>
<li class="chapter" data-level="18.1" data-path="metaanalysis.html"><a href="metaanalysis.html#introduction-4"><i class="fa fa-check"></i><b>18.1</b> Introduction</a></li>
<li class="chapter" data-level="18.2" data-path="metaanalysis.html"><a href="metaanalysis.html#christensen-meta"><i class="fa fa-check"></i><b>18.2</b> An overview of meta-analysis, from Christensen et al 2019, ch 5, ’Using all evidence, registration and meta-analysis</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="metaanalysis.html"><a href="metaanalysis.html#the-origins-and-importance-of-study-pre-registration"><i class="fa fa-check"></i><b>18.2.1</b> The origins [and importance] of study [pre-]registration</a></li>
<li class="chapter" data-level="18.2.2" data-path="metaanalysis.html"><a href="metaanalysis.html#social-science-study-registries"><i class="fa fa-check"></i><b>18.2.2</b> Social science study registries</a></li>
<li class="chapter" data-level="18.2.3" data-path="metaanalysis.html"><a href="metaanalysis.html#meta-analysis"><i class="fa fa-check"></i><b>18.2.3</b> Meta-analysis</a></li>
<li class="chapter" data-level="18.2.4" data-path="metaanalysis.html"><a href="metaanalysis.html#combining-estimates"><i class="fa fa-check"></i><b>18.2.4</b> Combining estimates</a></li>
<li class="chapter" data-level="18.2.5" data-path="metaanalysis.html"><a href="metaanalysis.html#heterogeneous-estimates"><i class="fa fa-check"></i><b>18.2.5</b> Heterogeneous estimates…</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="metaanalysis.html"><a href="metaanalysis.html#doing-meta"><i class="fa fa-check"></i><b>18.3</b> Excerpts and notes from <span>‘Doing Meta-Analysis in R: A Hands-on Guide’</span> (Harrer et al)</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="metaanalysis.html"><a href="metaanalysis.html#pooling-effect-sizes"><i class="fa fa-check"></i><b>18.3.1</b> Pooling effect sizes</a></li>
<li class="chapter" data-level="18.3.2" data-path="metaanalysis.html"><a href="metaanalysis.html#doing-bayes-meta"><i class="fa fa-check"></i><b>18.3.2</b> Bayesian Meta-analysis</a></li>
<li class="chapter" data-level="18.3.3" data-path="metaanalysis.html"><a href="metaanalysis.html#forest-plots"><i class="fa fa-check"></i><b>18.3.3</b> Forest plots</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="metaanalysis.html"><a href="metaanalysis.html#pubbias"><i class="fa fa-check"></i><b>18.4</b> Dealing with publication bias</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="metaanalysis.html"><a href="metaanalysis.html#diagnosis-and-responses-p-curves-funnel-plots-adjustments"><i class="fa fa-check"></i><b>18.4.1</b> Diagnosis and responses: P-curves, funnel plots, adjustments</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="metaanalysis.html"><a href="metaanalysis.html#other-notes-links-and-commentary"><i class="fa fa-check"></i><b>18.5</b> Other notes, links, and commentary</a></li>
<li class="chapter" data-level="18.6" data-path="metaanalysis.html"><a href="metaanalysis.html#other-resources-and-tools"><i class="fa fa-check"></i><b>18.6</b> Other resources and tools</a>
<ul>
<li class="chapter" data-level="18.6.1" data-path="metaanalysis.html"><a href="metaanalysis.html#institutional-and-systematic-guidelines"><i class="fa fa-check"></i><b>18.6.1</b> Institutional and systematic guidelines</a></li>
</ul></li>
<li class="chapter" data-level="18.7" data-path="metaanalysis.html"><a href="metaanalysis.html#example-discussion-of-meta-analyses-of-the-paleolithic-diet-below"><i class="fa fa-check"></i><b>18.7</b> Example: discussion of meta-analyses of the Paleolithic diet <span>BELOW</span></a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="bayes.html"><a href="bayes.html"><i class="fa fa-check"></i><b>19</b> Bayesian approaches</a>
<ul>
<li class="chapter" data-level="19.1" data-path="bayes.html"><a href="bayes.html#my-david-reinsteins-uses-for-bayesian-approaches-brainstorm"><i class="fa fa-check"></i><b>19.1</b> My (David Reinstein’s) uses for Bayesian approaches (brainstorm)</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="bayes.html"><a href="bayes.html#meta-analysis-of-previous-evidence"><i class="fa fa-check"></i><b>19.1.1</b> Meta-analysis of previous evidence</a></li>
<li class="chapter" data-level="19.1.2" data-path="bayes.html"><a href="bayes.html#inference-particularly-about-null-effects"><i class="fa fa-check"></i><b>19.1.2</b> Inference, particularly about ‘null effects’</a></li>
<li class="chapter" data-level="19.1.3" data-path="bayes.html"><a href="bayes.html#policy-and-business-implications-and-recommendations"><i class="fa fa-check"></i><b>19.1.3</b> ‘Policy’ and business implications and recommendations</a></li>
<li class="chapter" data-level="19.1.4" data-path="bayes.html"><a href="bayes.html#theory-driven-inference-about-optimizing-agents-esp.-in-strategic-settings"><i class="fa fa-check"></i><b>19.1.4</b> Theory-driven inference about optimizing agents, esp. in strategic settings</a></li>
<li class="chapter" data-level="19.1.5" data-path="bayes.html"><a href="bayes.html#experimental-design"><i class="fa fa-check"></i><b>19.1.5</b> Experimental design</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="bayes.html"><a href="bayes.html#statistical-thinking-mcelreath-and-aj-kurtz-recoded-bookdown-highlights-and-notes"><i class="fa fa-check"></i><b>19.2</b> ‘Statistical thinking’ (McElreath) and <span>AJ Kurtz ‘recoded’ (bookdown)</span>: highlights and notes</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="bayes.html"><a href="bayes.html#the-golem-of-prague-map-ant-the-territory"><i class="fa fa-check"></i><b>19.2.1</b> 1. The Golem of Prague (map ant the territory)</a></li>
<li class="chapter" data-level="19.2.2" data-path="bayes.html"><a href="bayes.html#small-worlds-and-large-worlds"><i class="fa fa-check"></i><b>19.2.2</b> 2. Small Worlds and Large Worlds</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="bayes.html"><a href="bayes.html#title-introduction-to-bayesian-analysis-in-r-and-stata---katz-qstep"><i class="fa fa-check"></i><b>19.3</b> Title: “Introduction to Bayesian analysis in R and Stata - Katz, Qstep”</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="bayes.html"><a href="bayes.html#why-and-when-use-bayesian-mcmc-methods"><i class="fa fa-check"></i><b>19.3.1</b> Why and when use Bayesian (MCMC) methods?</a></li>
<li class="chapter" data-level="19.3.2" data-path="bayes.html"><a href="bayes.html#theory"><i class="fa fa-check"></i><b>19.3.2</b> Theory</a></li>
<li class="chapter" data-level="19.3.3" data-path="bayes.html"><a href="bayes.html#comparing-models-equivalent-of-likelihood"><i class="fa fa-check"></i><b>19.3.3</b> Comparing models … Equivalent of ‘likelihood’</a></li>
<li class="chapter" data-level="19.3.4" data-path="bayes.html"><a href="bayes.html#on-choosing-priors"><i class="fa fa-check"></i><b>19.3.4</b> On choosing priors</a></li>
<li class="chapter" data-level="19.3.5" data-path="bayes.html"><a href="bayes.html#implementation"><i class="fa fa-check"></i><b>19.3.5</b> Implementation</a></li>
<li class="chapter" data-level="19.3.6" data-path="bayes.html"><a href="bayes.html#generate-predictions-from-a-winbugs-model"><i class="fa fa-check"></i><b>19.3.6</b> Generate predictions from a WinBUGS model</a></li>
<li class="chapter" data-level="19.3.7" data-path="bayes.html"><a href="bayes.html#missing-data-case"><i class="fa fa-check"></i><b>19.3.7</b> Missing data case</a></li>
<li class="chapter" data-level="19.3.8" data-path="bayes.html"><a href="bayes.html#stata"><i class="fa fa-check"></i><b>19.3.8</b> Stata</a></li>
<li class="chapter" data-level="19.3.9" data-path="bayes.html"><a href="bayes.html#r-mcmc-pac"><i class="fa fa-check"></i><b>19.3.9</b> R mcmc pac</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="bayes.html"><a href="bayes.html#other-resources-and-notes-to-integrate"><i class="fa fa-check"></i><b>19.4</b> Other resources and notes to integrate</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="n-ds4bs.html"><a href="n-ds4bs.html"><i class="fa fa-check"></i><b>20</b> Notes on Data Science for Business by Foster Provost and Tom Fawcett (2013)</a>
<ul>
<li class="chapter" data-level="20.1" data-path="n-ds4bs.html"><a href="n-ds4bs.html#evaluation-of-this-resource"><i class="fa fa-check"></i><b>20.1</b> Evaluation of this resource</a></li>
<li class="chapter" data-level="" data-path="n-ds4bs.html"><a href="n-ds4bs.html#ch-1-introduction-data-analytic-thinking"><i class="fa fa-check"></i>Ch 1 Introduction: Data-Analytic Thinking</a>
<ul>
<li class="chapter" data-level="" data-path="n-ds4bs.html"><a href="n-ds4bs.html#example-during-hurricane-frances-predicting-demand-to-gear-inventory-and-avoid-shortages-lead-to-huge-profit-for-wal-mart"><i class="fa fa-check"></i>Example: During Hurricane Frances… predicting demand to gear inventory and avoid shortages … lead to huge profit for Wal-Mart</a></li>
<li class="chapter" data-level="" data-path="n-ds4bs.html"><a href="n-ds4bs.html#example-predicting-customer-churn"><i class="fa fa-check"></i>Example: Predicting Customer Churn</a></li>
<li class="chapter" data-level="20.1.1" data-path="n-ds4bs.html"><a href="n-ds4bs.html#data-science-engineering-and-data-driven-decision-making"><i class="fa fa-check"></i><b>20.1.1</b> Data Science, Engineering, and Data-Driven Decision Making</a></li>
<li class="chapter" data-level="20.1.2" data-path="n-ds4bs.html"><a href="n-ds4bs.html#data-processing-and-big-data"><i class="fa fa-check"></i><b>20.1.2</b> Data Processing and “Big Data”</a></li>
<li class="chapter" data-level="20.1.3" data-path="n-ds4bs.html"><a href="n-ds4bs.html#data-asset"><i class="fa fa-check"></i><b>20.1.3</b> Data and Data Science Capability as a <strong>Strategic Asset</strong></a></li>
<li class="chapter" data-level="20.1.4" data-path="n-ds4bs.html"><a href="n-ds4bs.html#da-thinking"><i class="fa fa-check"></i><b>20.1.4</b> Data-Analytic Thinking</a></li>
<li class="chapter" data-level="20.1.5" data-path="n-ds4bs.html"><a href="n-ds4bs.html#data-mining-and-data-science-revisited"><i class="fa fa-check"></i><b>20.1.5</b> Data Mining and Data Science, Revisited</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="n-ds4bs.html"><a href="n-ds4bs.html#ds4bs-ch2"><i class="fa fa-check"></i><b>20.2</b> Ch 2 Business Problems and Data Science Solutions</a>
<ul>
<li class="chapter" data-level="20.2.1" data-path="n-ds4bs.html"><a href="n-ds4bs.html#types-of-problems-and-approaches"><i class="fa fa-check"></i><b>20.2.1</b> Types of problems and approaches</a></li>
<li class="chapter" data-level="20.2.2" data-path="n-ds4bs.html"><a href="n-ds4bs.html#data-mining-process"><i class="fa fa-check"></i><b>20.2.2</b> The Data Mining Process</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="n-ds4bs.html"><a href="n-ds4bs.html#ch-3-introduction-to-predictive-modeling-from-correlation-to-supervised-segmentation"><i class="fa fa-check"></i><b>20.3</b> Ch 3: Introduction to Predictive Modeling: From Correlation to Supervised Segmentation</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="n-ds4bs.html"><a href="n-ds4bs.html#models-induction-and-prediction"><i class="fa fa-check"></i><b>20.3.1</b> Models, Induction, and Prediction</a></li>
<li class="chapter" data-level="20.3.2" data-path="n-ds4bs.html"><a href="n-ds4bs.html#supervised-segmentation"><i class="fa fa-check"></i><b>20.3.2</b> Supervised Segmentation</a></li>
<li class="chapter" data-level="20.3.3" data-path="n-ds4bs.html"><a href="n-ds4bs.html#summary-1"><i class="fa fa-check"></i><b>20.3.3</b> Summary</a></li>
<li class="chapter" data-level="20.3.4" data-path="n-ds4bs.html"><a href="n-ds4bs.html#note-check-if-there-is-a-gap-here"><i class="fa fa-check"></i><b>20.3.4</b> NOTE – check if there is a gap here</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="n-ds4bs.html"><a href="n-ds4bs.html#ds4bs-model-to-data"><i class="fa fa-check"></i><b>20.4</b> Ch. 4: Fitting a Model to Data</a>
<ul>
<li class="chapter" data-level="20.4.1" data-path="n-ds4bs.html"><a href="n-ds4bs.html#classification-via-mathematical-functions"><i class="fa fa-check"></i><b>20.4.1</b> Classification via Mathematical Functions</a></li>
<li class="chapter" data-level="20.4.2" data-path="n-ds4bs.html"><a href="n-ds4bs.html#regression-via-mathematical-functions"><i class="fa fa-check"></i><b>20.4.2</b> Regression via Mathematical Functions</a></li>
<li class="chapter" data-level="20.4.3" data-path="n-ds4bs.html"><a href="n-ds4bs.html#class-probability-estimation-and-logistic-regression"><i class="fa fa-check"></i><b>20.4.3</b> Class Probability Estimation and Logistic Regression</a></li>
<li class="chapter" data-level="20.4.4" data-path="n-ds4bs.html"><a href="n-ds4bs.html#logistic-regression-some-technical-details"><i class="fa fa-check"></i><b>20.4.4</b> Logistic Regression: Some Technical Details</a></li>
<li class="chapter" data-level="20.4.5" data-path="n-ds4bs.html"><a href="n-ds4bs.html#example-logistic-regression-versus-tree-induction"><i class="fa fa-check"></i><b>20.4.5</b> Example: Logistic Regression versus Tree Induction</a></li>
<li class="chapter" data-level="20.4.6" data-path="n-ds4bs.html"><a href="n-ds4bs.html#nonlinear-functions-support-vector-machines-and-neural-networksthe-two-most-common-families-of-techniques-that-are-based-on-fitting-the-parameters-of-complex-nonlinear-functions-are-nonlinear-supportvector-machines-and-neural-networks."><i class="fa fa-check"></i><b>20.4.6</b> Nonlinear Functions, Support Vector Machines, and Neural NetworksThe two most common families of techniques that are based on fitting the parameters of complex, nonlinear functions are nonlinear supportvector machines and neural networks.</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="n-ds4bs.html"><a href="n-ds4bs.html#ds4bs-overfitting"><i class="fa fa-check"></i><b>20.5</b> Ch 5: Overfitting and its avoidance</a>
<ul>
<li class="chapter" data-level="20.5.1" data-path="n-ds4bs.html"><a href="n-ds4bs.html#generalization"><i class="fa fa-check"></i><b>20.5.1</b> Generalization</a></li>
<li class="chapter" data-level="20.5.2" data-path="n-ds4bs.html"><a href="n-ds4bs.html#holdout-data-and-fitting-graphs"><i class="fa fa-check"></i><b>20.5.2</b> Holdout Data and Fitting Graphs</a></li>
<li class="chapter" data-level="20.5.3" data-path="n-ds4bs.html"><a href="n-ds4bs.html#example-overfitting-linear-functions"><i class="fa fa-check"></i><b>20.5.3</b> Example: Overfitting Linear Functions</a></li>
<li class="chapter" data-level="20.5.4" data-path="n-ds4bs.html"><a href="n-ds4bs.html#example-why-is-overfitting-bad"><i class="fa fa-check"></i><b>20.5.4</b> Example: Why Is Overfitting Bad?</a></li>
<li class="chapter" data-level="20.5.5" data-path="n-ds4bs.html"><a href="n-ds4bs.html#from-holdout-evaluation-to-cross-validation"><i class="fa fa-check"></i><b>20.5.5</b> From Holdout Evaluation to Cross-Validation</a></li>
<li class="chapter" data-level="20.5.6" data-path="n-ds4bs.html"><a href="n-ds4bs.html#learning-curves"><i class="fa fa-check"></i><b>20.5.6</b> Learning Curves</a></li>
<li class="chapter" data-level="20.5.7" data-path="n-ds4bs.html"><a href="n-ds4bs.html#avoiding-overfitting-with-tree-induction"><i class="fa fa-check"></i><b>20.5.7</b> Avoiding Overfitting with Tree Induction</a></li>
<li class="chapter" data-level="20.5.8" data-path="n-ds4bs.html"><a href="n-ds4bs.html#a-general-method-for-avoiding-overfitting"><i class="fa fa-check"></i><b>20.5.8</b> A General Method for Avoiding Overfitting</a></li>
<li class="chapter" data-level="20.5.9" data-path="n-ds4bs.html"><a href="n-ds4bs.html#a-general-method-for-avoiding-overfitting-1"><i class="fa fa-check"></i><b>20.5.9</b> A General Method for Avoiding Overfitting</a></li>
<li class="chapter" data-level="20.5.10" data-path="n-ds4bs.html"><a href="n-ds4bs.html#avoiding-overfitting-for-parameter-optimization"><i class="fa fa-check"></i><b>20.5.10</b> Avoiding Overfitting for Parameter Optimization</a></li>
</ul></li>
<li class="chapter" data-level="20.6" data-path="n-ds4bs.html"><a href="n-ds4bs.html#ds4bs-similarity"><i class="fa fa-check"></i><b>20.6</b> Ch 6.: Similarity, Neighbors, and Clusters</a>
<ul>
<li class="chapter" data-level="20.6.1" data-path="n-ds4bs.html"><a href="n-ds4bs.html#similarity-and-distance"><i class="fa fa-check"></i><b>20.6.1</b> Similarity and Distance</a></li>
<li class="chapter" data-level="20.6.2" data-path="n-ds4bs.html"><a href="n-ds4bs.html#similarity-and-distance-1"><i class="fa fa-check"></i><b>20.6.2</b> Similarity and Distance</a></li>
<li class="chapter" data-level="20.6.3" data-path="n-ds4bs.html"><a href="n-ds4bs.html#example-whiskey-analytics"><i class="fa fa-check"></i><b>20.6.3</b> Example: Whiskey Analytics</a></li>
<li class="chapter" data-level="20.6.4" data-path="n-ds4bs.html"><a href="n-ds4bs.html#nearest-neighbors-for-predictive-modeling"><i class="fa fa-check"></i><b>20.6.4</b> Nearest Neighbors for Predictive Modeling</a></li>
<li class="chapter" data-level="20.6.5" data-path="n-ds4bs.html"><a href="n-ds4bs.html#how-many-neighbors-and-how-much-influence"><i class="fa fa-check"></i><b>20.6.5</b> How Many Neighbors and How Much Influence?</a></li>
<li class="chapter" data-level="20.6.6" data-path="n-ds4bs.html"><a href="n-ds4bs.html#geometric-interpretation-overfitting-and-complexity-control"><i class="fa fa-check"></i><b>20.6.6</b> Geometric Interpretation, Overfitting, and Complexity Control</a></li>
<li class="chapter" data-level="20.6.7" data-path="n-ds4bs.html"><a href="n-ds4bs.html#issues-with-nearest-neighbor-methods"><i class="fa fa-check"></i><b>20.6.7</b> Issues with Nearest-Neighbor Methods</a></li>
<li class="chapter" data-level="20.6.8" data-path="n-ds4bs.html"><a href="n-ds4bs.html#other-distance-functions"><i class="fa fa-check"></i><b>20.6.8</b> Other Distance Functions</a></li>
<li class="chapter" data-level="20.6.9" data-path="n-ds4bs.html"><a href="n-ds4bs.html#stepping-back-solving-a-business-problem-versus-data-exploration"><i class="fa fa-check"></i><b>20.6.9</b> Stepping Back: Solving a Business Problem Versus Data Exploration</a></li>
<li class="chapter" data-level="20.6.10" data-path="n-ds4bs.html"><a href="n-ds4bs.html#summary-2"><i class="fa fa-check"></i><b>20.6.10</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="20.7" data-path="n-ds4bs.html"><a href="n-ds4bs.html#ds4bs-decision-thinking"><i class="fa fa-check"></i><b>20.7</b> Ch. 7. Decision Analytic Thinking I: What Is a Good Model?</a>
<ul>
<li class="chapter" data-level="20.7.1" data-path="n-ds4bs.html"><a href="n-ds4bs.html#evaluating-classifier"><i class="fa fa-check"></i><b>20.7.1</b> Evaluating Classifier</a></li>
<li class="chapter" data-level="20.7.2" data-path="n-ds4bs.html"><a href="n-ds4bs.html#the-confusion-matrix"><i class="fa fa-check"></i><b>20.7.2</b> The Confusion Matrix</a></li>
<li class="chapter" data-level="20.7.3" data-path="n-ds4bs.html"><a href="n-ds4bs.html#problems-with-unbalanced-classes"><i class="fa fa-check"></i><b>20.7.3</b> Problems with Unbalanced Classes</a></li>
<li class="chapter" data-level="20.7.4" data-path="n-ds4bs.html"><a href="n-ds4bs.html#generalizing-beyond-classification"><i class="fa fa-check"></i><b>20.7.4</b> Generalizing Beyond Classification</a></li>
<li class="chapter" data-level="20.7.5" data-path="n-ds4bs.html"><a href="n-ds4bs.html#a-key-analytical-framework-expected-value"><i class="fa fa-check"></i><b>20.7.5</b> A Key Analytical Framework: Expected Value</a></li>
<li class="chapter" data-level="20.7.6" data-path="n-ds4bs.html"><a href="n-ds4bs.html#using-expected-value-to-frame-classifier-use"><i class="fa fa-check"></i><b>20.7.6</b> Using Expected Value to Frame Classifier Use</a></li>
<li class="chapter" data-level="20.7.7" data-path="n-ds4bs.html"><a href="n-ds4bs.html#using-expected-value-to-frame-classifier-evaluation"><i class="fa fa-check"></i><b>20.7.7</b> Using Expected Value to Frame Classifier Evaluation</a></li>
<li class="chapter" data-level="20.7.8" data-path="n-ds4bs.html"><a href="n-ds4bs.html#evaluation-baseline-performance-and-implications-for-investments-in-data"><i class="fa fa-check"></i><b>20.7.8</b> Evaluation, Baseline Performance, and Implications for Investments in Data</a></li>
<li class="chapter" data-level="20.7.9" data-path="n-ds4bs.html"><a href="n-ds4bs.html#summary-3"><i class="fa fa-check"></i><b>20.7.9</b> Summary</a></li>
<li class="chapter" data-level="20.7.10" data-path="n-ds4bs.html"><a href="n-ds4bs.html#ranking-instead-of-classifying"><i class="fa fa-check"></i><b>20.7.10</b> Ranking Instead of Classifying</a></li>
<li class="chapter" data-level="20.7.11" data-path="n-ds4bs.html"><a href="n-ds4bs.html#profit-curves"><i class="fa fa-check"></i><b>20.7.11</b> Profit Curves</a></li>
</ul></li>
<li class="chapter" data-level="20.8" data-path="n-ds4bs.html"><a href="n-ds4bs.html#ds4bs-contents"><i class="fa fa-check"></i><b>20.8</b> Contents and consideration</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="paleo-example.html"><a href="paleo-example.html"><i class="fa fa-check"></i>Meta-analysis arbitrary example: the ‘Paleo diet’</a>
<ul>
<li class="chapter" data-level="20.9" data-path="conceptual.html"><a href="conceptual.html#conceptual"><i class="fa fa-check"></i><b>20.9</b> Conceptual: Thoughts on nutritional studies and meta-analysis issues</a>
<ul>
<li class="chapter" data-level="20.9.1" data-path="paleo-example.html"><a href="paleo-example.html#compliance"><i class="fa fa-check"></i><b>20.9.1</b> Limited compliance; ‘what are we aiming to measure and why?’</a></li>
<li class="chapter" data-level="20.9.2" data-path="paleo-example.html"><a href="paleo-example.html#control-group-what-is-being-measured"><i class="fa fa-check"></i><b>20.9.2</b> Control group: what is being measured?</a></li>
<li class="chapter" data-level="20.9.3" data-path="paleo-example.html"><a href="paleo-example.html#what-is-being-tested-and-how-broadly-should-we-interpret-the-results"><i class="fa fa-check"></i><b>20.9.3</b> What is being tested and how broadly should we interpret the results?</a></li>
</ul></li>
<li class="chapter" data-level="20.10" data-path="paleo-example.html"><a href="paleo-example.html#manheimer"><i class="fa fa-check"></i><b>20.10</b> Manheimer et al</a>
<ul>
<li class="chapter" data-level="20.10.1" data-path="paleo-example.html"><a href="paleo-example.html#strengths-and-limitations"><i class="fa fa-check"></i><b>20.10.1</b> Strengths and limitations</a></li>
<li class="chapter" data-level="20.10.2" data-path="paleo-example.html"><a href="paleo-example.html#overall-results-interpretation-consideration-of-evidence-presented-in-manheimerpaleolithicnutritionmetabolic2015"><i class="fa fa-check"></i><b>20.10.2</b> Overall results, interpretation, consideration of evidence presented in <span class="citation"><span>Manheimer et al.</span> (<span>2015</span>)</span></a></li>
<li class="chapter" data-level="20.10.3" data-path="paleo-example.html"><a href="paleo-example.html#my-rough-conclusions-from-manheimer-et-al"><i class="fa fa-check"></i><b>20.10.3</b> My rough conclusions from Manheimer et al</a></li>
<li class="chapter" data-level="20.10.4" data-path="paleo-example.html"><a href="paleo-example.html#critiques"><i class="fa fa-check"></i><b>20.10.4</b> External critiques and evaluations of Manheimer et al, (esp Fenton) authors’ response</a></li>
</ul></li>
<li class="chapter" data-level="20.11" data-path="paleo-example.html"><a href="paleo-example.html#other-meta-analyses-and-consideration-of-the-paleo-diet"><i class="fa fa-check"></i><b>20.11</b> Other meta-analyses and consideration of the Paleo diet</a>
<ul>
<li class="chapter" data-level="20.11.1" data-path="paleo-example.html"><a href="paleo-example.html#process-of-finding-relevant-work-informal"><i class="fa fa-check"></i><b>20.11.1</b> Process of finding relevant work (informal)</a></li>
</ul></li>
<li class="chapter" data-level="20.12" data-path="paleo-example.html"><a href="paleo-example.html#boers"><i class="fa fa-check"></i><b>20.12</b> Focus: Boers et al</a></li>
<li class="chapter" data-level="20.13" data-path="paleo-example.html"><a href="paleo-example.html#overall-analysis"><i class="fa fa-check"></i><b>20.13</b> Overall analysis</a>
<ul>
<li class="chapter" data-level="20.13.1" data-path="paleo-example.html"><a href="paleo-example.html#limitations-p"><i class="fa fa-check"></i><b>20.13.1</b> Limitations and uncertainties to my own analysis; proposed future steps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="data-sci.html"><a href="data-sci.html"><i class="fa fa-check"></i><b>21</b> Getting, cleaning and using data</a>
<ul>
<li class="chapter" data-level="21.1" data-path="data-sci.html"><a href="data-sci.html#data-whatwhywherehow"><i class="fa fa-check"></i><b>21.1</b> Data: What/why/where/how</a></li>
<li class="chapter" data-level="21.2" data-path="data-sci.html"><a href="data-sci.html#organizing-a-project"><i class="fa fa-check"></i><b>21.2</b> Organizing a project</a></li>
<li class="chapter" data-level="21.3" data-path="data-sci.html"><a href="data-sci.html#dynamic-documents-esp-rmdbookdown"><i class="fa fa-check"></i><b>21.3</b> Dynamic documents (esp Rmd/bookdown)</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="data-sci.html"><a href="data-sci.html#managing-referencescitations"><i class="fa fa-check"></i><b>21.3.1</b> Managing references/citations</a></li>
<li class="chapter" data-level="21.3.2" data-path="data-sci.html"><a href="data-sci.html#an-example-of-dynamic-code"><i class="fa fa-check"></i><b>21.3.2</b> An example of dynamic code</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="data-sci.html"><a href="data-sci.html#project-management-tools-esp.-gitgithub"><i class="fa fa-check"></i><b>21.4</b> Project management tools, esp. Git/Github</a></li>
<li class="chapter" data-level="21.5" data-path="data-sci.html"><a href="data-sci.html#good-coding-practices"><i class="fa fa-check"></i><b>21.5</b> Good coding practices</a>
<ul>
<li class="chapter" data-level="21.5.1" data-path="data-sci.html"><a href="data-sci.html#new-tools-and-approaches-to-data-esp-tidyverse"><i class="fa fa-check"></i><b>21.5.1</b> New tools and approaches to data (esp ‘tidyverse’)</a></li>
<li class="chapter" data-level="21.5.2" data-path="data-sci.html"><a href="data-sci.html#style-and-consistency"><i class="fa fa-check"></i><b>21.5.2</b> Style and consistency</a></li>
<li class="chapter" data-level="21.5.3" data-path="data-sci.html"><a href="data-sci.html#using-functions-variable-lists-etc.-for-clean-concise-readable-code"><i class="fa fa-check"></i><b>21.5.3</b> Using functions, variable lists, etc., for clean, concise, readable code</a></li>
<li class="chapter" data-level="21.5.4" data-path="data-sci.html"><a href="data-sci.html#mapping-over-lists-to-produce-results"><i class="fa fa-check"></i><b>21.5.4</b> Mapping over lists to produce results</a></li>
<li class="chapter" data-level="21.5.5" data-path="data-sci.html"><a href="data-sci.html#building-results-based-on-lists-of-filters-of-the-data-set"><i class="fa fa-check"></i><b>21.5.5</b> Building results based on ‘lists of filters’ of the data set</a></li>
<li class="chapter" data-level="21.5.6" data-path="data-sci.html"><a href="data-sci.html#coding-style-and-indenting-in-stata-one-approach"><i class="fa fa-check"></i><b>21.5.6</b> Coding style and indenting in Stata (one approach)</a></li>
</ul></li>
<li class="chapter" data-level="21.6" data-path="data-sci.html"><a href="data-sci.html#additional-tips-integrate"><i class="fa fa-check"></i><b>21.6</b> Additional tips (integrate)</a>
<ul>
<li><a href="data-sci.html#some-key-points-from-r-for-data-science-see-my-hypothesis-notes">Some key points from <span>R for data science</span> (see my hypothesis notes)</a></li>
<li class="chapter" data-level="21.6.1" data-path="data-sci.html"><a href="data-sci.html#from-a-named-list"><i class="fa fa-check"></i><b>21.6.1</b> From a named list</a></li>
<li class="chapter" data-level="21.6.2" data-path="data-sci.html"><a href="data-sci.html#list-to-vector"><i class="fa fa-check"></i><b>21.6.2</b> List to vector</a></li>
<li class="chapter" data-level="21.6.3" data-path="data-sci.html"><a href="data-sci.html#unnesting"><i class="fa fa-check"></i><b>21.6.3</b> Unnesting</a></li>
<li class="chapter" data-level="21.6.4" data-path="data-sci.html"><a href="data-sci.html#section"><i class="fa fa-check"></i><b>21.6.4</b> </a></li>
</ul></li>
<li class="chapter" data-level="21.7" data-path="data-sci.html"><a href="data-sci.html#making-tidy-data-with-broom"><i class="fa fa-check"></i><b>21.7</b> Making tidy data with broom</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>22</b> List of references</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Statistics, econometrics, experiment and survey methods, data science: Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-sci" class="section level1" number="21">
<h1><span class="header-section-number">21</span> Getting, cleaning and using data</h1>
<p>This will build on my content <a href="https://daaronr.github.io/writing_econ_research/economic-theory-modeling-and-empirical-work.html#getting-and-using-data">here</a>, and integrate with it.</p>
<p>Some key resources are in a continually updated airtable <a href="https://airtable.com/shrqNt0YAa3eLiK5S">HERE</a></p>
<p>See especially:</p>
<p><a href="r4ds.had.co.nz">R for data science</a></p>
<p><a href="https://adv-r.hadley.nz/">Advanced R</a></p>
<p><a href="https://bookdown.org/yihui/bookdown/">bookdown: Authoring Books and Technical Documents with R Markdown:</a></p>
<p>[OSF: ‘PhD Toolkit on Transparent, Open, Reproducible Research’ <a href="https://osf.io/g8yjz/" class="uri">https://osf.io/g8yjz/</a>](OSF: ‘PhD Toolkit on Transparent, Open, Reproducible Research’ <a href="https://osf.io/g8yjz/" class="uri">https://osf.io/g8yjz/</a>)</p>
<p><a href="https://happygitwithr.com/">Happy Git and GitHub for the useR</a></p>
<p>“Data science for business” see <a href="n-ds4bs.html#n_ds4bs">WIP notes here</a></p>
<p><br />
</p>
<p>“Code and Data for the Social Sciences” (Gentzkow/Shapiro)</p>

<div class="note">
<p>See also <a href="n-ds4bs.html#n_ds4bs">“notes on Data Science for Business”</a></p>
</div>
<div id="data-whatwhywherehow" class="section level2" number="21.1">
<h2><span class="header-section-number">21.1</span> Data: What/why/where/how</h2>
</div>
<div id="organizing-a-project" class="section level2" number="21.2">
<h2><span class="header-section-number">21.2</span> Organizing a project</h2>
</div>
<div id="dynamic-documents-esp-rmdbookdown" class="section level2" number="21.3">
<h2><span class="header-section-number">21.3</span> Dynamic documents (esp Rmd/bookdown)</h2>
<p>Some guidelines from a particular project:</p>
<p><a href="https://daaronr.github.io/ea_giving_barriers/bookdown-appendix.html">Appendix: Tech for creating, editing and collaborating on this ‘Bookdown’ web book/project (and starting your own)</a></p>
<div id="managing-referencescitations" class="section level3" number="21.3.1">
<h3><span class="header-section-number">21.3.1</span> Managing references/citations</h3>

<div class="note">
<p>A letter to my co-authors…</p>
<p>Hi all.</p>
<p>Hope you are doing well. I’ve just invited you to a shared Zotero group managing my bibliography/references. I think this should be useful. (I prefer Zotero to Mendeley because it’s open source and… I forgot the other reason.)
On my computer it synchronizes with a .bib (bibtex) file in a dropbox folder …</p>
<p>For latex files we just refer to this as normal.
In the Rmd files/bookdown (producing output like <a href="#https://daaronr.github.io/ea_giving_barriers/outline.html">EA barriers</a> or Metrics notes (present book) this is referenced in the YAML header to the index.Rmd file as</p>
<blockquote>
<p>bibliography: [reinstein_bibtex.bib]</p>
</blockquote>
<p>Then, to keep this file, I have a “download block” included in that same file (the first line with ‘dropbox’ is the key one).</p>
</div>
<p><br />
</p>
<p>The download code follows (remove the ‘eval=FALSE’ to get it to actually run)…</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="data-sci.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tryCatch</span>( <span class="co">#trycatch lets us &#39;try&#39; to execute and if there is an error, it does the thing *after* the braces, rather than crashing</span></span>
<span id="cb98-2"><a href="data-sci.html#cb98-2" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb98-3"><a href="data-sci.html#cb98-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">&quot;https://www.dropbox.com/s/3i8bjrgo8u08v5w/reinstein_bibtex.bib?raw=1&quot;</span>, <span class="at">destfile =</span> <span class="st">&quot;reinstein_bibtex.bib&quot;</span>) <span class="co">#download the bibtex database</span></span>
<span id="cb98-4"><a href="data-sci.html#cb98-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-5"><a href="data-sci.html#cb98-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">&quot;https://raw.githubusercontent.com/daaronr/dr-rstuff/master/bookdown_template/support/tufte_plus.css&quot;</span>, <span class="at">destfile =</span> <span class="fu">here</span>(<span class="st">&quot;support&quot;</span>, <span class="st">&quot;tufte_plus.css&quot;</span>)) <span class="co">#this downloads the style file</span></span>
<span id="cb98-6"><a href="data-sci.html#cb98-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-7"><a href="data-sci.html#cb98-7" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb98-8"><a href="data-sci.html#cb98-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;you are not online, so we can&#39;t download&quot;</span>)</span>
<span id="cb98-9"><a href="data-sci.html#cb98-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb98-10"><a href="data-sci.html#cb98-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>A fairly comprehensive discussion of tools for citation in R-markdown:</p>
<p><a href="https://ropensci.org/technotes/2020/05/07/rmd-citations/">A Roundup of R Tools for Handling BibTeX</a></p>
</div>
<div id="an-example-of-dynamic-code" class="section level3" number="21.3.2">
<h3><span class="header-section-number">21.3.2</span> An example of dynamic code</h3>
<p>Shapiro Wilk test for normality; professor salaries at some US university from the built in Cars data…</p>
<div class="marginnote">
<p>By the way, if anyone wants me to offer me a job at that university, it looks like a great deal!</p>
</div>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="data-sci.html#cb99-1" aria-hidden="true" tabindex="-1"></a>prof_sal_shapiro_test <span class="ot">&lt;-</span> <span class="fu">shapiro.test</span>(carData<span class="sc">::</span>Salaries<span class="sc">$</span>salary)</span>
<span id="cb99-2"><a href="data-sci.html#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="data-sci.html#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ShapiroTest &lt;- map_df(list(SXDonShapiroTest, EXDonShapiroTest), tidy)</span></span>
<span id="cb99-4"><a href="data-sci.html#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># (ShapiroTest &lt;- kable(ShapiroTest) %&gt;% kable_styling())</span></span></code></pre></div>
<p>The results from the Shapiro Wilk normality test …</p>
<p>The p-values are 6.07605182361928e-09 suggesting this data is not normal</p>
</div>
</div>
<div id="project-management-tools-esp.-gitgithub" class="section level2" number="21.4">
<h2><span class="header-section-number">21.4</span> Project management tools, esp. Git/Github</h2>
<p>(More to be added/linked here)</p>
<p>See <a href="https://daaronr.github.io/ea_giving_barriers/bookdown-appendix.html#git-and-github">‘Git and GitHub’ here… watch this space</a></p>
<p><br />
</p>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
<p>For students and research assistants, I’ve been sending first time git users/developers to this:<a href="https://t.co/P6KQpXHCWI">https://t.co/P6KQpXHCWI</a><br>+ <a href="https://t.co/q4R4Ei5Biw">https://t.co/q4R4Ei5Biw</a></p>
</p>
<p>— Nathan Lane (@straightedge) <a href="https://twitter.com/straightedge/status/1172694350205087744?ref_src=twsrc%5Etfw">September 14, 2019</a></p>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>
<div id="good-coding-practices" class="section level2" number="21.5">
<h2><span class="header-section-number">21.5</span> Good coding practices</h2>
<div id="new-tools-and-approaches-to-data-esp-tidyverse" class="section level3" number="21.5.1">
<h3><span class="header-section-number">21.5.1</span> New tools and approaches to data (esp ‘tidyverse’)</h3>
<p>From <a href="https://bookdown.org/content/3890/small-worlds-and-large-worlds.html">Kurtz</a>:</p>
<blockquote>
<p>If you are new to tidyverse-style syntax, possibly the oddest component is the pipe (i.e., <code>%&gt;%</code>). I’m not going to explain the <code>%&gt;%</code> in this project, but you might learn more about in <a href="https://www.youtube.com/watch?v=9yjhxvu-pDg">this brief clip</a>, starting around <a href="https://www.youtube.com/watch?v=K-ss_ag2k9E&amp;t=1285s">minute 21:25 in this talk by Wickham</a>, or in <a href="https://r4ds.had.co.nz/transform.html#combining-multiple-operations-with-the-pipe">section 5.6.1 from Grolemund and Wickham’s <em>R for Data Science</em></a>. Really, all of Chapter 5 of <em>R4DS</em> is just great for new R and new tidyverse users. And <em>R4DS</em> Chapter 3 is a nice introduction to plotting with ggplot2.</p>
</blockquote>
</div>
<div id="style-and-consistency" class="section level3" number="21.5.2">
<h3><span class="header-section-number">21.5.2</span> Style and consistency</h3>
<div id="lower_snake_case" class="section level4 unnumbered">
<h4>lower_snake_case</h4>
<p>Use <code>lower_snake_case</code> to name <em>all</em> objects (that’s my preference anyways) unless there’s a strong reason to do otherwise.</p>
<p><br />
</p>
<p>This includes:</p>
<p><code>file_names.txt</code> <code>folder_names</code> <code>function_names</code> (with few exceptions) <code>names_of_data_objects_like_vectors</code> <code>names_of_data_output_objects_like_correlation_coefficients</code> <code>ex_df1</code> In R you probably should keep data frame names short to avoid excessive typing</p>
<p><br />
</p>
<p><em>And by all that is holy, never put spaces or slashes in file or object names!</em> This can make it very hard to process across systems… there are various ways of referring to spaces and other white space.</p>
</div>
<div id="indenting-and-spacing" class="section level4" number="21.5.2.1">
<h4><span class="header-section-number">21.5.2.1</span> Indenting and spacing</h4>
</div>
</div>
<div id="using-functions-variable-lists-etc.-for-clean-concise-readable-code" class="section level3" number="21.5.3">
<h3><span class="header-section-number">21.5.3</span> Using functions, variable lists, etc., for clean, concise, readable code</h3>
</div>
<div id="mapping-over-lists-to-produce-results" class="section level3" number="21.5.4">
<h3><span class="header-section-number">21.5.4</span> Mapping over lists to produce results</h3>
<!-- ft <- list(ft_treat_no_ask, ft_treat_no_ask_19, ft_treat_no_ask_19_short, ft_treat_no_ask_19_long)

ft_names <- c("All", "2019", "2019-short", "2019-long")

ft <- map2(ft, ft_names, function(x, y) {
  broom::tidy(x) %>% add_column(Experiment = y)
}) %>%
  bind_rows() %>%
  kable(, caption = "S2 Donation incidence by S1 Ask/no-ask; Fisher tests", digits = 2) %>%
  kable_styling()
-->
</div>
<div id="building-results-based-on-lists-of-filters-of-the-data-set" class="section level3" number="21.5.5">
<h3><span class="header-section-number">21.5.5</span> Building results based on ‘lists of filters’ of the data set</h3>
<p>In writing a paper you very often want to produce ‘statistics A-F for subsets S1-S5.’</p>
<p>Can’t we just automate this?</p>
<p><br />
</p>
<p>We can store a filter as a character vector and then apply it</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="data-sci.html#cb100-1" aria-hidden="true" tabindex="-1"></a>selection_statement <span class="ot">&lt;-</span> <span class="st">&quot;Species == &#39;setosa&#39; &amp; Petal.Width&gt;0.3&quot;</span></span>
<span id="cb100-2"><a href="data-sci.html#cb100-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-3"><a href="data-sci.html#cb100-3" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb100-4"><a href="data-sci.html#cb100-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">as.tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb100-5"><a href="data-sci.html#cb100-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(rlang<span class="sc">::</span><span class="fu">eval_tidy</span>(rlang<span class="sc">::</span><span class="fu">parse_expr</span>(selection_statement)))</span></code></pre></div>
<pre><code>## # A tibble: 9 x 5
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
## 1          5.4         3.9          1.7         0.4 setosa 
## 2          5.7         4.4          1.5         0.4 setosa 
## 3          5.4         3.9          1.3         0.4 setosa 
## 4          5.1         3.7          1.5         0.4 setosa 
## 5          5.1         3.3          1.7         0.5 setosa 
## 6          5           3.4          1.6         0.4 setosa 
## 7          5.4         3.4          1.5         0.4 setosa 
## 8          5           3.5          1.6         0.6 setosa 
## 9          5.1         3.8          1.9         0.4 setosa</code></pre>
<p>Making this a function for later use:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="data-sci.html#cb102-1" aria-hidden="true" tabindex="-1"></a>selection_statement <span class="ot">&lt;-</span> <span class="st">&quot;Species == &#39;setosa&#39; &amp; Petal.Width&gt;0.3&quot;</span></span>
<span id="cb102-2"><a href="data-sci.html#cb102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-3"><a href="data-sci.html#cb102-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-4"><a href="data-sci.html#cb102-4" aria-hidden="true" tabindex="-1"></a>filter_parse <span class="ot">=</span>  <span class="cf">function</span>(df, x) {</span>
<span id="cb102-5"><a href="data-sci.html#cb102-5" aria-hidden="true" tabindex="-1"></a>  {{df}} <span class="sc">%&gt;%</span></span>
<span id="cb102-6"><a href="data-sci.html#cb102-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(rlang<span class="sc">::</span><span class="fu">eval_tidy</span>(rlang<span class="sc">::</span><span class="fu">parse_expr</span>({{x}})))</span>
<span id="cb102-7"><a href="data-sci.html#cb102-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb102-8"><a href="data-sci.html#cb102-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-9"><a href="data-sci.html#cb102-9" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb102-10"><a href="data-sci.html#cb102-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb102-11"><a href="data-sci.html#cb102-11" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter_parse</span>(selection_statement)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 5
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
## 1          5.4         3.9          1.7         0.4 setosa 
## 2          5.7         4.4          1.5         0.4 setosa 
## 3          5.4         3.9          1.3         0.4 setosa 
## 4          5.1         3.7          1.5         0.4 setosa 
## 5          5.1         3.3          1.7         0.5 setosa 
## 6          5           3.4          1.6         0.4 setosa 
## 7          5.4         3.4          1.5         0.4 setosa 
## 8          5           3.5          1.6         0.6 setosa 
## 9          5.1         3.8          1.9         0.4 setosa</code></pre>
<p>We can do the same for a list of character vectors of filter statements, and apply each filter from the list to the dataframe, and then the output function:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="data-sci.html#cb104-1" aria-hidden="true" tabindex="-1"></a>sel_st <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Species == &#39;setosa&#39; &amp; Petal.Width&gt;0.3&quot;</span>, <span class="st">&quot;Species == &#39;virginica&#39; &amp; Petal.Width&gt;2.4&quot;</span>)</span>
<span id="cb104-2"><a href="data-sci.html#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="data-sci.html#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(iris, selection_statement)</span></code></pre></div>
<pre><code>## $Sepal.Length
## NULL
## 
## $Sepal.Width
## NULL
## 
## $Petal.Length
## NULL
## 
## $Petal.Width
## NULL
## 
## $Species
## NULL</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="data-sci.html#cb106-1" aria-hidden="true" tabindex="-1"></a>sel_st <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">filter_parse</span>(iris, .x))</span></code></pre></div>
<pre><code>## [[1]]
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.4         3.9          1.7         0.4  setosa
## 2          5.7         4.4          1.5         0.4  setosa
## 3          5.4         3.9          1.3         0.4  setosa
## 4          5.1         3.7          1.5         0.4  setosa
## 5          5.1         3.3          1.7         0.5  setosa
## 6          5.0         3.4          1.6         0.4  setosa
## 7          5.4         3.4          1.5         0.4  setosa
## 8          5.0         3.5          1.6         0.6  setosa
## 9          5.1         3.8          1.9         0.4  setosa
## 
## [[2]]
##   Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 1          6.3         3.3          6.0         2.5 virginica
## 2          7.2         3.6          6.1         2.5 virginica
## 3          6.7         3.3          5.7         2.5 virginica</code></pre>
<p>It works nicely if you have a list of filters aligned with a list of names or other objects ‘specific to each filter’</p>
<p>(Code below: adapt to public data and explain)</p>
<pre><code> bal_sx &lt;-
    map2(subsets_sx_dur, subsets_sx_dur_name, function(x, y) {
      filter_parse(sa, x) %&gt;%
    dplyr::filter(stage == &quot;2&quot;) %&gt;%
     tabyl(treat_1, treat_2, show_missing_levels = FALSE)  %&gt;%
    adornme_not(cap = paste(y, &quot;; 1st and 2nd stage treatments&quot;))
    }
  )</code></pre>
</div>
<div id="coding-style-and-indenting-in-stata-one-approach" class="section level3" number="21.5.6">
<h3><span class="header-section-number">21.5.6</span> Coding style and indenting in Stata (one approach)</h3>
<p>I indent every line except</p>
<ul>
<li><p>clear, import, save, merge (‘file operations’)</p>
<ul>
<li>except where these occur as part of a loop, in which case I put in an ‘important comment’ noting these operations</li>
</ul></li>
<li><p>lines that call other do files</p></li>
<li><p>important comments/flags/to-do’s</p></li>
</ul>
<p>I only put ‘small todo’ elements having to do with code in a code file itself (and even then there may be better places). If we are going to put todos I suggest we include <code>#todo</code> to search for these later (and R has a utility to collect these in a nice way… maybe Stata does too.</p>
<p><br />
</p>
<p>Whenever there are more than 20 lines of something prosaic that cannot/has not been put into a loop or function, I suggest we put it in a separate ‘do’ file and call that do file (with no indent). That’s what I do here, giving a brief description and a ‘back link.’ Sometimes I put all those do files into an separate folder.</p>
</div>
</div>
<div id="additional-tips-integrate" class="section level2" number="21.6">
<h2><span class="header-section-number">21.6</span> Additional tips (integrate)</h2>
<p><a href="https://twitter.com/gdequeiroz/status/1228722821817225216">When you have to upgrade R on Mac, how to preserve package installations - twitter thread</a></p>
<ul>
<li><a href="https://github.com/ivelasq/r-data-recipes/blob/master/README.md#reinstall-packages-after-a-major-r-update">This worked well for me</a>. Thanks @ivelasq3 !<br />
</li>
</ul>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
<p>Are you teaching/learning <a href="https://twitter.com/hashtag/r?src=hash&amp;ref_src=twsrc%5Etfw">#r</a> <a href="https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw">#rstats</a> &amp; want to teach/learn the latest <a href="https://twitter.com/hashtag/tidyverse?src=hash&amp;ref_src=twsrc%5Etfw">#tidyverse</a> <a href="https://twitter.com/hashtag/tidyr?src=hash&amp;ref_src=twsrc%5Etfw">#tidyr</a> tools? e.g. bind_rows, pivot_wider/pivot_longer, the join family (full_join, inner_join…) Check out my slides on “Advanced data manipulation” here 😺<a href="https://t.co/dr9VNx7MFf">https://t.co/dr9VNx7MFf</a></p>
</p>
<p>— Amy Willis (@AmyDWillis) <a href="https://twitter.com/AmyDWillis/status/1195498569072959490?ref_src=twsrc%5Etfw">November 16, 2019</a></p>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p><br />
</p>
<p><strong>Tools for structuring your workflow for reproducable code with Rmd and Git: The workflowr package</strong></p>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
<p>“This paper does a thorough job setting out the rationale, design, and implementation of the workflowr package” says <a href="https://twitter.com/PeteHaitch?ref_src=twsrc%5Etfw">@PeteHaitch</a> <a href="https://twitter.com/WEHI_research?ref_src=twsrc%5Etfw">\<span class="citation">(<a href="#ref-WEHI_research" role="doc-biblioref"><strong>WEHI_research?</strong></a>)</span></a> in his review of this <a href="https://twitter.com/hashtag/softwaretool?src=hash&amp;ref_src=twsrc%5Etfw">#softwaretool</a> article introducing workflowr by <a href="https://twitter.com/jdblischak?ref_src=twsrc%5Etfw">@jdblischak</a> and co-authors <a href="https://t.co/ZXmQkDhFuD">https://t.co/ZXmQkDhFuD</a> <a href="https://twitter.com/hashtag/OpenScience?src=hash&amp;ref_src=twsrc%5Etfw">#OpenScience</a> <a href="https://t.co/e77SVo8PhO">pic.twitter.com/e77SVo8PhO</a></p>
</p>
<p>— F1000Research (@F1000Research) <a href="https://twitter.com/F1000Research/status/1196056651691962368?ref_src=twsrc%5Etfw">November 17, 2019</a></p>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p><br />
</p>
<p>Switching from Latex to markdown/R-markdown? <a href="https://colinbousige.github.io/post/rmarkdown/">These tips from Colin Bousige look pretty good</a>, although I prefer the bookdown/gitbook format</p>
<p>Massive data cleaning using the Recipe package</p>
<p>Codebook package</p>
<div id="some-key-points-from-r-for-data-science-see-my-hypothesis-notes" class="section level3 unnumbered">
<h3>Some key points from <a href="r4ds.had.co.nz">R for data science</a> (see my hypothesis notes)</h3>
<div id="automating-many-models" class="section level4 unnumbered">
<h4>Automating <a href="https://r4ds.had.co.nz/many-models.html">‘many models’</a></h4>

<div class="note">
Actually, I think <a href="https://stackoverflow.com/questions/46332863/how-to-fit-multiple-models-on-multiple-dataset-in-purrr">this</a> is the automation we are usually more interested in, i.e., ‘’run this on these subsets of the data, for these variable sets.’’
)
</div>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="data-sci.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb109-2"><a href="data-sci.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelr)</span>
<span id="cb109-3"><a href="data-sci.html#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<blockquote>
<p>Extract out the common code with a function and repeat using a map function from <code>purrr</code>. This problem is structured a little differently to what you’ve seen before. Instead of repeating an action for each variable, we want to repeat an action for each country, a subset of rows. To do that, we need a new data structure: the nested data frame. To create a nested data frame we start with a grouped data frame, and “nest” it:</p>
</blockquote>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="data-sci.html#cb110-1" aria-hidden="true" tabindex="-1"></a>by_country <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="data-sci.html#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country, continent) <span class="sc">%&gt;%</span> </span>
<span id="cb110-3"><a href="data-sci.html#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="co">#automatically labels a list column (column of tibbles, which are lists) as &#39;data&#39;</span></span></code></pre></div>
<blockquote>
<p>This creates a data frame that has one row per group (per country), and a rather unusual column: <code>data</code>. <code>data</code> is a list of data frames (or tibbles, to be precise).</p>
</blockquote>
<blockquote>
<p>in a nested data frame, each row is a group.</p>
</blockquote>
<blockquote>
<p>We have a model-fitting function:</p>
</blockquote>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="data-sci.html#cb111-1" aria-hidden="true" tabindex="-1"></a>country_model <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb111-2"><a href="data-sci.html#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(lifeExp <span class="sc">~</span> year, <span class="at">data =</span> df)</span>
<span id="cb111-3"><a href="data-sci.html#cb111-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<blockquote>
<p>The data frames are in a list, so we can use <code>purrr::map()</code> to apply <code>country_model</code> to each element…</p>
</blockquote>
<blockquote>
<p>However, rather than leaving the list of models as a free-floating object, I think it’s better to store it as a column in the <code>by_country</code> data frame.</p>
</blockquote>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="data-sci.html#cb112-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb112-2"><a href="data-sci.html#cb112-2" aria-hidden="true" tabindex="-1"></a>  by_country <span class="ot">&lt;-</span> by_country <span class="sc">%&gt;%</span> </span>
<span id="cb112-3"><a href="data-sci.html#cb112-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">map</span>(data, country_model))</span>
<span id="cb112-4"><a href="data-sci.html#cb112-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 142 x 4
## # Groups:   country, continent [142]
##    country     continent data                  model 
##    &lt;fct&gt;       &lt;fct&gt;     &lt;list&gt;                &lt;list&gt;
##  1 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;  
##  2 Albania     Europe    &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;  
##  3 Algeria     Africa    &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;  
##  4 Angola      Africa    &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;  
##  5 Argentina   Americas  &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;  
##  6 Australia   Oceania   &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;  
##  7 Austria     Europe    &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;  
##  8 Bahrain     Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;  
##  9 Bangladesh  Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;  
## 10 Belgium     Europe    &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;  
## # … with 132 more rows</code></pre>
<p>Here, the <code>model</code> list-column is created, resulting from mapping the <code>data</code> list-column (list of tibbles) into the <code>country_model</code> function.</p>
<blockquote>
<p>because all the related objects are stored together, you don’t need to manually keep them in sync when you filter or arrange.</p>
</blockquote>
<p>To compute the residuals, we need to call <code>add_residuals()</code> with each model-data pair:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="data-sci.html#cb114-1" aria-hidden="true" tabindex="-1"></a>by_country <span class="ot">&lt;-</span> by_country <span class="sc">%&gt;%</span> </span>
<span id="cb114-2"><a href="data-sci.html#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb114-3"><a href="data-sci.html#cb114-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">resids =</span> <span class="fu">map2</span>(data, model, add_residuals)</span>
<span id="cb114-4"><a href="data-sci.html#cb114-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb114-5"><a href="data-sci.html#cb114-5" aria-hidden="true" tabindex="-1"></a>by_country</span></code></pre></div>
<pre><code>## # A tibble: 142 x 5
## # Groups:   country, continent [142]
##    country     continent data                  model  resids               
##    &lt;fct&gt;       &lt;fct&gt;     &lt;list&gt;                &lt;list&gt; &lt;list&gt;               
##  1 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;   &lt;tibble[,5] [12 × 5]&gt;
##  2 Albania     Europe    &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;   &lt;tibble[,5] [12 × 5]&gt;
##  3 Algeria     Africa    &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;   &lt;tibble[,5] [12 × 5]&gt;
##  4 Angola      Africa    &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;   &lt;tibble[,5] [12 × 5]&gt;
##  5 Argentina   Americas  &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;   &lt;tibble[,5] [12 × 5]&gt;
##  6 Australia   Oceania   &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;   &lt;tibble[,5] [12 × 5]&gt;
##  7 Austria     Europe    &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;   &lt;tibble[,5] [12 × 5]&gt;
##  8 Bahrain     Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;   &lt;tibble[,5] [12 × 5]&gt;
##  9 Bangladesh  Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;   &lt;tibble[,5] [12 × 5]&gt;
## 10 Belgium     Europe    &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;   &lt;tibble[,5] [12 × 5]&gt;
## # … with 132 more rows</code></pre>
<div class="marginnote">
<p>Coding note: How does this syntax work? How do <code>data</code> and <code>model</code> end up referring to columns in the <code>by_country</code> tibble?</p>
<p>Because it’s inside the ‘mutate,’ I guess, so the data frame is implied.</p>
</div>
<blockquote>
<p>[So that we can plot it] … let’s turn the list of data frames back into a regular data frame. Previously we used <code>nest()</code> to turn a regular data frame into an nested data frame, and now we do the opposite with <code>unnest()</code>:</p>
</blockquote>
<p>(Note it’s saved as a different object for now)</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="data-sci.html#cb116-1" aria-hidden="true" tabindex="-1"></a>resids <span class="ot">&lt;-</span> <span class="fu">unnest</span>(by_country, resids)</span>
<span id="cb116-2"><a href="data-sci.html#cb116-2" aria-hidden="true" tabindex="-1"></a>resids</span></code></pre></div>
<pre><code>## # A tibble: 1,704 x 9
## # Groups:   country, continent [142]
##    country     continent data                  model   year lifeExp      pop gdpPercap   resid
##    &lt;fct&gt;       &lt;fct&gt;     &lt;list&gt;                &lt;list&gt; &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;   &lt;dbl&gt;
##  1 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;    1952    28.8  8425333      779. -1.11  
##  2 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;    1957    30.3  9240934      821. -0.952 
##  3 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;    1962    32.0 10267083      853. -0.664 
##  4 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;    1967    34.0 11537966      836. -0.0172
##  5 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;    1972    36.1 13079460      740.  0.674 
##  6 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;    1977    38.4 14880372      786.  1.65  
##  7 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;    1982    39.9 12881816      978.  1.69  
##  8 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;    1987    40.8 13867957      852.  1.28  
##  9 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;    1992    41.7 16317921      649.  0.754 
## 10 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt; &lt;lm&gt;    1997    41.8 22227415      635. -0.534 
## # … with 1,694 more rows</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="data-sci.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co">#and then we plot it </span></span>
<span id="cb118-2"><a href="data-sci.html#cb118-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-3"><a href="data-sci.html#cb118-3" aria-hidden="true" tabindex="-1"></a>resids <span class="sc">%&gt;%</span> </span>
<span id="cb118-4"><a href="data-sci.html#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, resid)) <span class="sc">+</span></span>
<span id="cb118-5"><a href="data-sci.html#cb118-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> country), <span class="at">alpha =</span> <span class="dv">1</span> <span class="sc">/</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb118-6"><a href="data-sci.html#cb118-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb118-7"><a href="data-sci.html#cb118-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>continent)</span></code></pre></div>
<p><img src="metrics_and_tools_files/figure-html/unnamed-chunk-122-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="data-sci.html#cb119-1" aria-hidden="true" tabindex="-1"></a>glance <span class="ot">&lt;-</span> by_country <span class="sc">%&gt;%</span> </span>
<span id="cb119-2"><a href="data-sci.html#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">glance =</span> <span class="fu">map</span>(model, broom<span class="sc">::</span>glance)) <span class="sc">%&gt;%</span> </span>
<span id="cb119-3"><a href="data-sci.html#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(glance)</span></code></pre></div>
<p>Above, we add a column <code>glance</code>, resulting from mapping the <code>mode</code>l column to the <code>broom::glance</code> function. <code>glance</code> gets some key elements of the models’ outputs.<br />
<br />
Then we unnest this column. Note that <code>unnest</code> spreads out the elements of the <code>glance</code> output into columns, but as these are specific to each country (but <em>not</em> each year), it doesn’t add more rows (while, e,g., unnesting <code>resids</code> <em>would</em> add more rows).</p>
<p>One way of judging the ‘fit’ of these models… The worst-fitting ones, in terms of R-squared, seem to be in Africa (we save the worst ones as <code>bad_fit</code>:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="data-sci.html#cb120-1" aria-hidden="true" tabindex="-1"></a>glance <span class="sc">%T&gt;%</span> </span>
<span id="cb120-2"><a href="data-sci.html#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(r.squared) <span class="sc">%T&gt;%</span> <span class="fu">print</span>() <span class="sc">%&gt;%</span>  <span class="co">#look I get both in one pipe flow with T-pipe and the &#39;print&#39; side effect</span></span>
<span id="cb120-3"><a href="data-sci.html#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(continent, r.squared)) <span class="sc">+</span> </span>
<span id="cb120-4"><a href="data-sci.html#cb120-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.3</span>) </span></code></pre></div>
<pre><code>## # A tibble: 142 x 17
## # Groups:   country, continent [142]
##    country  continent data   model resids  r.squared adj.r.squared sigma statistic  p.value    df logLik
##    &lt;fct&gt;    &lt;fct&gt;     &lt;list&gt; &lt;lis&gt; &lt;list&gt;      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 Afghani… Asia      &lt;tibb… &lt;lm&gt;  &lt;tibbl…     0.948         0.942 1.22      181.  9.84e- 8     1 -18.3 
##  2 Albania  Europe    &lt;tibb… &lt;lm&gt;  &lt;tibbl…     0.911         0.902 1.98      102.  1.46e- 6     1 -24.1 
##  3 Algeria  Africa    &lt;tibb… &lt;lm&gt;  &lt;tibbl…     0.985         0.984 1.32      662.  1.81e-10     1 -19.3 
##  4 Angola   Africa    &lt;tibb… &lt;lm&gt;  &lt;tibbl…     0.888         0.877 1.41       79.1 4.59e- 6     1 -20.0 
##  5 Argenti… Americas  &lt;tibb… &lt;lm&gt;  &lt;tibbl…     0.996         0.995 0.292    2246.  4.22e-13     1  -1.17
##  6 Austral… Oceania   &lt;tibb… &lt;lm&gt;  &lt;tibbl…     0.980         0.978 0.621     481.  8.67e-10     1 -10.2 
##  7 Austria  Europe    &lt;tibb… &lt;lm&gt;  &lt;tibbl…     0.992         0.991 0.407    1261.  7.44e-12     1  -5.16
##  8 Bahrain  Asia      &lt;tibb… &lt;lm&gt;  &lt;tibbl…     0.967         0.963 1.64      291.  1.02e- 8     1 -21.9 
##  9 Banglad… Asia      &lt;tibb… &lt;lm&gt;  &lt;tibbl…     0.989         0.988 0.977     930.  3.37e-11     1 -15.7 
## 10 Belgium  Europe    &lt;tibb… &lt;lm&gt;  &lt;tibbl…     0.995         0.994 0.293    1822.  1.20e-12     1  -1.20
## # … with 132 more rows, and 5 more variables: AIC &lt;dbl&gt;, BIC &lt;dbl&gt;, deviance &lt;dbl&gt;, df.residual &lt;int&gt;,
## #   nobs &lt;int&gt;</code></pre>
<p><img src="metrics_and_tools_files/figure-html/unnamed-chunk-124-1.png" width="80%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="data-sci.html#cb122-1" aria-hidden="true" tabindex="-1"></a>bad_fit <span class="ot">&lt;-</span> <span class="fu">filter</span>(glance, r.squared <span class="sc">&lt;</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p><br />
</p>
<p>What may have caused the “bad fit,” i.e., a departure from the country-specific trends?</p>
<p>We <code>semi_join</code> the original data set to these ‘worst fitting countries’ … this keeps only those that match, i.e., only the worst-fitting countries. (Probably we could otherwise have instead expanded the <code>data</code> list?)</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="data-sci.html#cb123-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb123-2"><a href="data-sci.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">semi_join</span>(bad_fit, <span class="at">by =</span> <span class="st">&quot;country&quot;</span>) <span class="sc">%&gt;%</span> <span class="co">#I think this just &#39;keeps all elements of the first df that are also present in the second frame</span></span>
<span id="cb123-3"><a href="data-sci.html#cb123-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, lifeExp, <span class="at">colour =</span> country)) <span class="sc">+</span></span>
<span id="cb123-4"><a href="data-sci.html#cb123-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="metrics_and_tools_files/figure-html/unnamed-chunk-125-1.png" width="80%" style="display: block; margin: auto;" /></p>
<blockquote>
<p>We see two main effects here: the tragedies of the HIV/AIDS epidemic and the Rwandan genocide.</p>
</blockquote>
</div>
<div id="list-columns" class="section level4" number="21.6.0.1">
<h4><span class="header-section-number">21.6.0.1</span> List-columns</h4>
<blockquote>
<p>Now that you’ve seen a basic workflow for managing many models… let’s dive… into some of the details</p>
</blockquote>
<p>We saw a workflow for managing</p>
<ul>
<li><p>split the data apart</p></li>
<li><p>run the same model model for each of the groups</p></li>
<li><p>save this all in a single organized tibble</p></li>
<li><p>report and graph the results in different ways</p></li>
</ul>
<blockquote>
<p>a data frame is a named list of equal length vectors.</p>
</blockquote>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="data-sci.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>))</span></code></pre></div>
<pre><code>##   x.1.3 x.3.5
## 1     1     3
## 2     2     4
## 3     3     5</code></pre>
<p>But incorporating list columns is much easier with <code>tibble</code> and <code>tribble</code> , because <code>tibble()</code> doesn’t modify its inputs, and prints better:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="data-sci.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb126-2"><a href="data-sci.html#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>), </span>
<span id="cb126-3"><a href="data-sci.html#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="st">&quot;1, 2&quot;</span>, <span class="st">&quot;3, 4, 5&quot;</span>)</span>
<span id="cb126-4"><a href="data-sci.html#cb126-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   x         y      
##   &lt;list&gt;    &lt;chr&gt;  
## 1 &lt;int [3]&gt; 1, 2   
## 2 &lt;int [3]&gt; 3, 4, 5</code></pre>
<pre><code>&lt;div class=&quot;marginnote&quot;&gt;
But note each column still has to have the same number of rows.
&lt;/div&gt;
 </code></pre>
<p>And <code>tribble()</code> (<a href="http://127.0.0.1:28503/help/library/tibble/html/tribble.html">row-wise tibble creation</a>) “can automatically work out that you need a list:”</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="data-sci.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tribble</span>(</span>
<span id="cb129-2"><a href="data-sci.html#cb129-2" aria-hidden="true" tabindex="-1"></a>   <span class="sc">~</span>x, <span class="sc">~</span>y,</span>
<span id="cb129-3"><a href="data-sci.html#cb129-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">&quot;1, 2&quot;</span>,</span>
<span id="cb129-4"><a href="data-sci.html#cb129-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">&quot;3, 4, 5&quot;</span></span>
<span id="cb129-5"><a href="data-sci.html#cb129-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   x         y      
##   &lt;list&gt;    &lt;chr&gt;  
## 1 &lt;int [3]&gt; 1, 2   
## 2 &lt;int [3]&gt; 3, 4, 5</code></pre>
<blockquote>
<p>List-columns are often most useful as intermediate data structure. [to keep things organised before later unnesting or whatever]</p>
<p>Generally there are three parts of an effective list-column pipeline:</p>
<ol style="list-style-type: decimal">
<li>You create the list-column using one of <code>nest()</code>, <code>summarise()</code> + <code>list()</code>, or <code>mutate()</code> + a map function, as described in <a href="data-sci.html#creating-list-columns">Creating list-columns</a>.</li>
<li>You create other intermediate list-columns by transforming existing list columns with <code>map()</code>, <code>map2()</code> or <code>pmap()</code>. For example, in the case study above, we created a list-column of models by transforming a list-column of data frames.</li>
<li>You simplify the list-column back down to a data frame or atomic vector, as described in <a href="data-sci.html#simplifying-list-columns">Simplifying list-columns</a>.</li>
</ol>
</blockquote>
<div id="creating-list-columns" class="section level5" number="21.6.0.1.1">
<h5><span class="header-section-number">21.6.0.1.1</span> Creating list-columns</h5>
<blockquote>
<p>Typically, you’ll … [create] list columns them from regular columns, [either]:</p>
<ol style="list-style-type: decimal">
<li><p>With <code>tidyr::nest()</code> to convert a grouped data frame into a nested data frame where you have list-columns of data frames.</p></li>
<li><p>With <code>mutate()</code> and vectorised functions that return a list.</p></li>
<li><p>With <code>summarise()</code> and summary functions that return multiple results.</p></li>
</ol>
<p>Alternatively, you might create them from a named list, using <code>tibble::enframe()</code>.</p>
<p>… make sure they’re homogeneous: each element should contain the same type of thing.</p>
</blockquote>
</div>
<div id="with-nesting" class="section level5" number="21.6.0.1.2">
<h5><span class="header-section-number">21.6.0.1.2</span> With nesting</h5>
<blockquote>
<p><code>nest()</code> creates … a data frame with a list-column of data frames. … each row is a meta-observation:</p>
<p>When applied to a grouped data frame, <code>nest()</code> keeps the grouping columns as is, and bundles everything else into the list-column:</p>
</blockquote>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="data-sci.html#cb131-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb131-2"><a href="data-sci.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country, continent) <span class="sc">%&gt;%</span> </span>
<span id="cb131-3"><a href="data-sci.html#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>()</span></code></pre></div>
<pre><code>## # A tibble: 142 x 3
## # Groups:   country, continent [142]
##    country     continent data                 
##    &lt;fct&gt;       &lt;fct&gt;     &lt;list&gt;               
##  1 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt;
##  2 Albania     Europe    &lt;tibble[,4] [12 × 4]&gt;
##  3 Algeria     Africa    &lt;tibble[,4] [12 × 4]&gt;
##  4 Angola      Africa    &lt;tibble[,4] [12 × 4]&gt;
##  5 Argentina   Americas  &lt;tibble[,4] [12 × 4]&gt;
##  6 Australia   Oceania   &lt;tibble[,4] [12 × 4]&gt;
##  7 Austria     Europe    &lt;tibble[,4] [12 × 4]&gt;
##  8 Bahrain     Asia      &lt;tibble[,4] [12 × 4]&gt;
##  9 Bangladesh  Asia      &lt;tibble[,4] [12 × 4]&gt;
## 10 Belgium     Europe    &lt;tibble[,4] [12 × 4]&gt;
## # … with 132 more rows</code></pre>
<blockquote>
<p>You can also use it on an ungrouped data frame, specifying which columns you want to nest [i.e., all but country and continent below]</p>
</blockquote>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="data-sci.html#cb133-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb133-2"><a href="data-sci.html#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="fu">c</span>(year<span class="sc">:</span>gdpPercap))</span></code></pre></div>
<pre><code>## # A tibble: 142 x 3
##    country     continent data                 
##    &lt;fct&gt;       &lt;fct&gt;     &lt;list&gt;               
##  1 Afghanistan Asia      &lt;tibble[,4] [12 × 4]&gt;
##  2 Albania     Europe    &lt;tibble[,4] [12 × 4]&gt;
##  3 Algeria     Africa    &lt;tibble[,4] [12 × 4]&gt;
##  4 Angola      Africa    &lt;tibble[,4] [12 × 4]&gt;
##  5 Argentina   Americas  &lt;tibble[,4] [12 × 4]&gt;
##  6 Australia   Oceania   &lt;tibble[,4] [12 × 4]&gt;
##  7 Austria     Europe    &lt;tibble[,4] [12 × 4]&gt;
##  8 Bahrain     Asia      &lt;tibble[,4] [12 × 4]&gt;
##  9 Bangladesh  Asia      &lt;tibble[,4] [12 × 4]&gt;
## 10 Belgium     Europe    &lt;tibble[,4] [12 × 4]&gt;
## # … with 132 more rows</code></pre>
</div>
<div id="from-vectorised-functions" class="section level5" number="21.6.0.1.3">
<h5><span class="header-section-number">21.6.0.1.3</span> From vectorised functions</h5>
<blockquote>
<p>.. functions take an atomic vector and return a list, e.g., <code>stringr::str_split()</code> …</p>
</blockquote>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="data-sci.html#cb135-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb135-2"><a href="data-sci.html#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>x1,</span>
<span id="cb135-3"><a href="data-sci.html#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;a,b,c&quot;</span>, </span>
<span id="cb135-4"><a href="data-sci.html#cb135-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;d,e,f,g&quot;</span></span>
<span id="cb135-5"><a href="data-sci.html#cb135-5" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb135-6"><a href="data-sci.html#cb135-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-7"><a href="data-sci.html#cb135-7" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb135-8"><a href="data-sci.html#cb135-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">x2 =</span> stringr<span class="sc">::</span><span class="fu">str_split</span>(x1, <span class="st">&quot;,&quot;</span>)) </span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   x1      x2       
##   &lt;chr&gt;   &lt;list&gt;   
## 1 a,b,c   &lt;chr [3]&gt;
## 2 d,e,f,g &lt;chr [4]&gt;</code></pre>
<p>Above, <code>str_split</code> generates a list from each element of a character vector … this <code>x2</code> is generated as a list-vector.<br />
You can then <code>unnest</code> … which will spread it out:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="data-sci.html#cb137-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb137-2"><a href="data-sci.html#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">x2 =</span> stringr<span class="sc">::</span><span class="fu">str_split</span>(x1, <span class="st">&quot;,&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb137-3"><a href="data-sci.html#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(x2)</span></code></pre></div>
<pre><code>## # A tibble: 7 x 2
##   x1      x2   
##   &lt;chr&gt;   &lt;chr&gt;
## 1 a,b,c   a    
## 2 a,b,c   b    
## 3 a,b,c   c    
## 4 d,e,f,g d    
## 5 d,e,f,g e    
## 6 d,e,f,g f    
## 7 d,e,f,g g</code></pre>
<p><em>(Not sure when I would use the above?)</em></p>
<blockquote>
<p>Another example … using the <code>map()</code>, <code>map2()</code>, <code>pmap()</code> from purrr.</p>
</blockquote>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="data-sci.html#cb139-1" aria-hidden="true" tabindex="-1"></a>sim <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb139-2"><a href="data-sci.html#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>f,      <span class="sc">~</span>params,</span>
<span id="cb139-3"><a href="data-sci.html#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;runif&quot;</span>, <span class="fu">list</span>(<span class="at">min =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">max =</span> <span class="dv">1</span>),</span>
<span id="cb139-4"><a href="data-sci.html#cb139-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;rnorm&quot;</span>, <span class="fu">list</span>(<span class="at">sd =</span> <span class="dv">5</span>),</span>
<span id="cb139-5"><a href="data-sci.html#cb139-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;rpois&quot;</span>, <span class="fu">list</span>(<span class="at">lambda =</span> <span class="dv">10</span>)</span>
<span id="cb139-6"><a href="data-sci.html#cb139-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb139-7"><a href="data-sci.html#cb139-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-8"><a href="data-sci.html#cb139-8" aria-hidden="true" tabindex="-1"></a>(xxx<span class="ot">&lt;-</span> sim <span class="sc">%&gt;%</span></span>
<span id="cb139-9"><a href="data-sci.html#cb139-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sims =</span> <span class="fu">invoke_map</span>(f, params, <span class="at">n =</span> <span class="dv">10</span>))</span>
<span id="cb139-10"><a href="data-sci.html#cb139-10" aria-hidden="true" tabindex="-1"></a>) <span class="co"># the invoke_map syntax is deprecated, but I can&#39;t figure out the new syntax</span></span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   f     params           sims      
##   &lt;chr&gt; &lt;list&gt;           &lt;list&gt;    
## 1 runif &lt;named list [2]&gt; &lt;dbl [10]&gt;
## 2 rnorm &lt;named list [1]&gt; &lt;dbl [10]&gt;
## 3 rpois &lt;named list [1]&gt; &lt;int [10]&gt;</code></pre>
</div>
<div id="from-multivalued-summaries" class="section level5" number="21.6.0.1.4">
<h5><span class="header-section-number">21.6.0.1.4</span> From multivalued summaries</h5>
<blockquote>
<p>f <code>summarise()</code> … only works with summary functions that return a single value. … not functions like <code>quantile()</code> that return a vector of arbitrary length:</p>
</blockquote>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="data-sci.html#cb141-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb141-2"><a href="data-sci.html#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb141-3"><a href="data-sci.html#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">q =</span> <span class="fu">quantile</span>(mpg)) <span class="co">#this now seems to run?</span></span></code></pre></div>
<pre><code>## # A tibble: 15 x 2
## # Groups:   cyl [3]
##      cyl     q
##    &lt;dbl&gt; &lt;dbl&gt;
##  1     4  21.4
##  2     4  22.8
##  3     4  26  
##  4     4  30.4
##  5     4  33.9
##  6     6  17.8
##  7     6  18.6
##  8     6  19.7
##  9     6  21  
## 10     6  21.4
## 11     8  10.4
## 12     8  14.4
## 13     8  15.2
## 14     8  16.2
## 15     8  19.2</code></pre>
<blockquote>
<p>You can however, wrap the result in a list! This obeys the contract of <code>summarise()</code>, because each summary is now a list (a vector) of length 1.</p>
</blockquote>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="data-sci.html#cb143-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb143-2"><a href="data-sci.html#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb143-3"><a href="data-sci.html#cb143-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">q =</span> <span class="fu">list</span>(<span class="fu">quantile</span>(mpg)))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##     cyl q        
##   &lt;dbl&gt; &lt;list&gt;   
## 1     4 &lt;dbl [5]&gt;
## 2     6 &lt;dbl [5]&gt;
## 3     8 &lt;dbl [5]&gt;</code></pre>
<p>OK this is neater<br />
<br />
To make useful results with unnest, you’ll also need to capture the probabilities:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="data-sci.html#cb145-1" aria-hidden="true" tabindex="-1"></a>probs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.01</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="fl">0.99</span>)</span>
<span id="cb145-2"><a href="data-sci.html#cb145-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb145-3"><a href="data-sci.html#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb145-4"><a href="data-sci.html#cb145-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">p =</span> <span class="fu">list</span>(probs), <span class="at">q =</span> <span class="fu">list</span>(<span class="fu">quantile</span>(mpg, probs))) <span class="sc">%&gt;%</span> </span>
<span id="cb145-5"><a href="data-sci.html#cb145-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="fu">c</span>(p, q))</span></code></pre></div>
<pre><code>## # A tibble: 15 x 3
##      cyl     p     q
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1     4  0.01  21.4
##  2     4  0.25  22.8
##  3     4  0.5   26  
##  4     4  0.75  30.4
##  5     4  0.99  33.8
##  6     6  0.01  17.8
##  7     6  0.25  18.6
##  8     6  0.5   19.7
##  9     6  0.75  21  
## 10     6  0.99  21.4
## 11     8  0.01  10.4
## 12     8  0.25  14.4
## 13     8  0.5   15.2
## 14     8  0.75  16.2
## 15     8  0.99  19.1</code></pre>
</div>
</div>
</div>
<div id="from-a-named-list" class="section level3" number="21.6.1">
<h3><span class="header-section-number">21.6.1</span> From a named list</h3>
<p>Data frames with list-columns provide a solution to a common problem: what do you do if you want to iterate over both the contents of a list and its elements? Instead of trying to jam everything into one object, it’s often easier to make a data frame: one column can contain the elements, and one column can contain the list. An easy way to create such a data frame from a list is <code>tibble::enframe()</code>.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="data-sci.html#cb147-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb147-2"><a href="data-sci.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb147-3"><a href="data-sci.html#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>, </span>
<span id="cb147-4"><a href="data-sci.html#cb147-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">c =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb147-5"><a href="data-sci.html#cb147-5" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb147-6"><a href="data-sci.html#cb147-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-7"><a href="data-sci.html#cb147-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">enframe</span>(x)</span>
<span id="cb147-8"><a href="data-sci.html#cb147-8" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   name  value    
##   &lt;chr&gt; &lt;list&gt;   
## 1 a     &lt;int [5]&gt;
## 2 b     &lt;int [2]&gt;
## 3 c     &lt;int [2]&gt;</code></pre>
<p>The advantage of this structure is that it generalises in a straightforward way - names are useful if you have character vector of metadata, but don’t help if you have other types of data, or multiple vectors.</p>
<p>Now if you want to iterate over names and values in parallel, you can use <code>map2()</code>:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="data-sci.html#cb149-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb149-2"><a href="data-sci.html#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb149-3"><a href="data-sci.html#cb149-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">smry =</span> <span class="fu">map2_chr</span>(name, value, <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_c</span>(.x, <span class="st">&quot;: &quot;</span>, .y[<span class="dv">1</span>]))</span>
<span id="cb149-4"><a href="data-sci.html#cb149-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   name  value     smry 
##   &lt;chr&gt; &lt;list&gt;    &lt;chr&gt;
## 1 a     &lt;int [5]&gt; a: 1 
## 2 b     &lt;int [2]&gt; b: 3 
## 3 c     &lt;int [2]&gt; c: 5</code></pre>
<div id="simplifying-list-columns" class="section level5" number="21.6.1.0.1">
<h5><span class="header-section-number">21.6.1.0.1</span> Simplifying list-columns</h5>
<p>To apply the techniques of data manipulation and visualisation you’ve learned in this book, you’ll need to simplify the list-column back to a regular column (an atomic vector), or set of columns. The technique you’ll use to collapse back down to a simpler structure depends on whether you want a single value per element, or multiple values:</p>
<ol style="list-style-type: decimal">
<li><p>If you want a single value, use <code>mutate()</code> with <code>map_lgl()</code>, <code>map_int()</code>, <code>map_dbl()</code>, and <code>map_chr()</code> to create an atomic vector.</p></li>
<li><p>If you want many values, use <code>unnest()</code> to convert list-columns back to regular columns, repeating the rows as many times as necessary.</p></li>
</ol>
<p>These are described in more detail below.</p>
</div>
</div>
<div id="list-to-vector" class="section level3" number="21.6.2">
<h3><span class="header-section-number">21.6.2</span> List to vector</h3>
<p>If you can reduce your list column to an atomic vector then it will be a regular column. For example, you can always summarise an object with its type and length, so this code will work regardless of what sort of list-column you have:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="data-sci.html#cb151-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb151-2"><a href="data-sci.html#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>x,</span>
<span id="cb151-3"><a href="data-sci.html#cb151-3" aria-hidden="true" tabindex="-1"></a>  letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>],</span>
<span id="cb151-4"><a href="data-sci.html#cb151-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb151-5"><a href="data-sci.html#cb151-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">runif</span>(<span class="dv">5</span>)</span>
<span id="cb151-6"><a href="data-sci.html#cb151-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb151-7"><a href="data-sci.html#cb151-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb151-8"><a href="data-sci.html#cb151-8" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb151-9"><a href="data-sci.html#cb151-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="fu">map_chr</span>(x, typeof),</span>
<span id="cb151-10"><a href="data-sci.html#cb151-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">length =</span> <span class="fu">map_int</span>(x, length)</span>
<span id="cb151-11"><a href="data-sci.html#cb151-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   x         type      length
##   &lt;list&gt;    &lt;chr&gt;      &lt;int&gt;
## 1 &lt;chr [5]&gt; character      5
## 2 &lt;int [3]&gt; integer        3
## 3 &lt;dbl [5]&gt; double         5</code></pre>
<p>This is the same basic information that you get from the default tbl print method, but now you can use it for filtering. This is a useful technique if you have a heterogeneous list, and want to filter out the parts aren’t working for you.</p>
<p>Don’t forget about the <code>map_*()</code> shortcuts - you can use <code>map_chr(x, "apple")</code> to extract the string stored in <code>apple</code> for each element of <code>x</code>. This is useful for pulling apart nested lists into regular columns. Use the <code>.null</code> argument to provide a value to use if the element is missing (instead of returning <code>NULL</code>):</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="data-sci.html#cb153-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb153-2"><a href="data-sci.html#cb153-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>x,</span>
<span id="cb153-3"><a href="data-sci.html#cb153-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>),</span>
<span id="cb153-4"><a href="data-sci.html#cb153-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">2</span>, <span class="at">c =</span> <span class="dv">4</span>)</span>
<span id="cb153-5"><a href="data-sci.html#cb153-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb153-6"><a href="data-sci.html#cb153-6" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb153-7"><a href="data-sci.html#cb153-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">map_dbl</span>(x, <span class="st">&quot;a&quot;</span>),</span>
<span id="cb153-8"><a href="data-sci.html#cb153-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">map_dbl</span>(x, <span class="st">&quot;b&quot;</span>, <span class="at">.null =</span> <span class="cn">NA_real_</span>)</span>
<span id="cb153-9"><a href="data-sci.html#cb153-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   x                    a     b
##   &lt;list&gt;           &lt;dbl&gt; &lt;dbl&gt;
## 1 &lt;named list [2]&gt;     1     2
## 2 &lt;named list [2]&gt;     2    NA</code></pre>
</div>
<div id="unnesting" class="section level3" number="21.6.3">
<h3><span class="header-section-number">21.6.3</span> Unnesting</h3>
<p><code>unnest()</code> works by repeating the regular columns once for each element of the list-column. For example, in the following very simple example we repeat the first row 4 times (because there the first element of <code>y</code> has length four), and the second row once:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="data-sci.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">y =</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">1</span>)) <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(y)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##       x     y
##   &lt;int&gt; &lt;dbl&gt;
## 1     1     1
## 2     1     2
## 3     1     3
## 4     1     4
## 5     2     1</code></pre>
<p>This means that you can’t simultaneously unnest two columns that contain different number of elements:</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="data-sci.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ok, because y and z have the same number of elements in</span></span>
<span id="cb157-2"><a href="data-sci.html#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="co"># every row</span></span>
<span id="cb157-3"><a href="data-sci.html#cb157-3" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb157-4"><a href="data-sci.html#cb157-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>x, <span class="sc">~</span>y,           <span class="sc">~</span>z,</span>
<span id="cb157-5"><a href="data-sci.html#cb157-5" aria-hidden="true" tabindex="-1"></a>   <span class="dv">1</span>, <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>), <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,</span>
<span id="cb157-6"><a href="data-sci.html#cb157-6" aria-hidden="true" tabindex="-1"></a>   <span class="dv">2</span>, <span class="st">&quot;c&quot;</span>,           <span class="dv">3</span></span>
<span id="cb157-7"><a href="data-sci.html#cb157-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb157-8"><a href="data-sci.html#cb157-8" aria-hidden="true" tabindex="-1"></a>df1</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##       x y         z        
##   &lt;dbl&gt; &lt;list&gt;    &lt;list&gt;   
## 1     1 &lt;chr [2]&gt; &lt;int [2]&gt;
## 2     2 &lt;chr [1]&gt; &lt;dbl [1]&gt;</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="data-sci.html#cb159-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(<span class="fu">c</span>(y, z))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##       x y         z
##   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
## 1     1 a         1
## 2     1 b         2
## 3     2 c         3</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="data-sci.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Doesn&#39;t work because y and z have different number of elements</span></span>
<span id="cb161-2"><a href="data-sci.html#cb161-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb161-3"><a href="data-sci.html#cb161-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>x, <span class="sc">~</span>y,           <span class="sc">~</span>z,</span>
<span id="cb161-4"><a href="data-sci.html#cb161-4" aria-hidden="true" tabindex="-1"></a>   <span class="dv">1</span>, <span class="st">&quot;a&quot;</span>,         <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,  </span>
<span id="cb161-5"><a href="data-sci.html#cb161-5" aria-hidden="true" tabindex="-1"></a>   <span class="dv">2</span>, <span class="fu">c</span>(<span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>),   <span class="dv">3</span></span>
<span id="cb161-6"><a href="data-sci.html#cb161-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb161-7"><a href="data-sci.html#cb161-7" aria-hidden="true" tabindex="-1"></a>df2</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##       x y         z        
##   &lt;dbl&gt; &lt;list&gt;    &lt;list&gt;   
## 1     1 &lt;chr [1]&gt; &lt;int [2]&gt;
## 2     2 &lt;chr [2]&gt; &lt;dbl [1]&gt;</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="data-sci.html#cb163-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(<span class="fu">c</span>(y, z))</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##       x y         z
##   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
## 1     1 a         1
## 2     1 a         2
## 3     2 b         3
## 4     2 c         3</code></pre>
<p>The same principle applies when unnesting list-columns of data frames. You can unnest multiple list-cols as long as all the data frames in each row have the same number of rows.</p>
</div>
<div id="section" class="section level3" number="21.6.4">
<h3><span class="header-section-number">21.6.4</span> </h3>
</div>
</div>
<div id="making-tidy-data-with-broom" class="section level2" number="21.7">
<h2><span class="header-section-number">21.7</span> Making tidy data with broom</h2>
<p>The broom package provides three general tools for turning models into tidy data frames:</p>
<ol style="list-style-type: decimal">
<li><p><code>broom::glance(model)</code> returns a row for each model. Each column gives a model summary: either a measure of model quality, or complexity, or a combination of the two.</p></li>
<li><p><code>broom::tidy(model)</code> returns a row for each coefficient in the model. Each column gives information about the estimate or its variability.</p></li>
<li><p><code>broom::augment(model, data)</code> returns a row for each row in <code>data</code>, adding extra values like residuals, and influence statistics.</p></li>
</ol>
<p><br />
</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="data-sci.html#cb165-1" aria-hidden="true" tabindex="-1"></a>test_models <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb165-2"><a href="data-sci.html#cb165-2" aria-hidden="true" tabindex="-1"></a>   <span class="sc">~</span>df, <span class="sc">~</span>filter, <span class="sc">~</span>y, <span class="sc">~</span>x, <span class="sc">~</span>model, <span class="sc">~</span>family,</span>
<span id="cb165-3"><a href="data-sci.html#cb165-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;mtcars&quot;</span>, <span class="st">&quot;disp&gt;100&quot;</span>, <span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;wt, gear&quot;</span>,<span class="st">&quot;lm&quot;</span>, <span class="st">&quot;&quot;</span>,</span>
<span id="cb165-4"><a href="data-sci.html#cb165-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;mtcars&quot;</span>, <span class="st">&quot;disp&lt;100&quot;</span>, <span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;wt, gear, hp&quot;</span>, <span class="st">&quot;lm&quot;</span>, <span class="st">&quot;&quot;</span>,</span>
<span id="cb165-5"><a href="data-sci.html#cb165-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;mtcars&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="st">&quot;vs&quot;</span>, <span class="st">&quot;wt, gear, hp&quot;</span>, <span class="st">&quot;glm&quot;</span>, <span class="st">&quot;binomial&quot;</span>,</span>
<span id="cb165-6"><a href="data-sci.html#cb165-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;cars&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="st">&quot;speed&quot;</span>, <span class="st">&quot;dist&quot;</span>, <span class="st">&quot;lm&quot;</span>, <span class="st">&quot;&quot;</span></span>
<span id="cb165-7"><a href="data-sci.html#cb165-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>I want it to run</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="data-sci.html#cb166-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">filter</span>(disp<span class="sc">&gt;</span><span class="dv">100</span>) <span class="sc">%&gt;%</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> gear, <span class="at">data =</span>.) </span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ wt + gear, data = .)
## 
## Coefficients:
## (Intercept)           wt         gear  
##     31.3800      -3.8854       0.0609</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="data-sci.html#cb168-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">filter</span>(disp<span class="sc">&lt;</span><span class="dv">100</span>) <span class="sc">%&gt;%</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> gear <span class="sc">+</span>  hp, <span class="at">data =</span>.) </span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ wt + gear + hp, data = .)
## 
## Coefficients:
## (Intercept)           wt         gear           hp  
##     25.1383       1.8527       0.7982      -0.0136</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="data-sci.html#cb170-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> <span class="fu">filter</span>() <span class="sc">%&gt;%</span> <span class="fu">glm</span>(vs <span class="sc">~</span> wt <span class="sc">+</span> gear <span class="sc">+</span>  hp, <span class="at">data =</span>., <span class="at">family=</span><span class="st">&quot;binomial&quot;</span>) </span></code></pre></div>
<pre><code>## 
## Call:  glm(formula = vs ~ wt + gear + hp, family = &quot;binomial&quot;, data = .)
## 
## Coefficients:
## (Intercept)           wt         gear           hp  
##     11.1757       0.5555      -0.6472      -0.0851  
## 
## Degrees of Freedom: 31 Total (i.e. Null);  28 Residual
## Null Deviance:       44 
## Residual Deviance: 16    AIC: 24</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="data-sci.html#cb172-1" aria-hidden="true" tabindex="-1"></a>cars <span class="sc">%&gt;%</span> <span class="fu">filter</span>() <span class="sc">%&gt;%</span> <span class="fu">lm</span>(speed <span class="sc">~</span> dist,<span class="at">data =</span>.) </span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = speed ~ dist, data = .)
## 
## Coefficients:
## (Intercept)         dist  
##       8.284        0.166</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="paleo-example.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
